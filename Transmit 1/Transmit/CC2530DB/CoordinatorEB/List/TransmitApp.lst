###############################################################################
#                                                                             #
# IAR C/C++ Compiler V7.60.1.40026 for 8051             11/Jun/2011  21:35:56 #
# Copyright (C) 2004-2010 IAR Systems AB.                                     #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  D:\Texas Instruments\ZStack-CC2530-2.4.0-1.4.0\Pro #
#                          jects\zstack\Utilities\Transmit\Source\TransmitApp #
#                          .c                                                 #
#    Command line       =  -f "D:\Texas Instruments\ZStack-CC2530-2.4.0-1.4.0 #
#                          \Projects\zstack\Utilities\Transmit\CC2530DB\..\.. #
#                          \..\Tools\CC2530DB\f8wCoord.cfg" (-DCPU32MHZ       #
#                          -DROOT=__near_func -DMAC_CFG_APP_PENDING_QUEUE=TRU #
#                          E -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8       #
#                          -DMAC_CFG_RX_MAX=5 -DZDO_COORDINATOR -DRTR_NWK)    #
#                          -f "D:\Texas Instruments\ZStack-CC2530-2.4.0-1.4.0 #
#                          \Projects\zstack\Utilities\Transmit\CC2530DB\..\.. #
#                          \..\Tools\CC2530DB\f8wConfig.cfg" (-DZIGBEEPRO     #
#                          -DSECURE=0 -DZG_SECURE_DYNAMIC=0 -DREFLECTOR       #
#                          -DDEFAULT_CHANLIST=0x00000800                      #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFFF                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)   #
#                          -DREJOIN_POLL_RATE=440 "D:\Texas                   #
#                          Instruments\ZStack-CC2530-2.4.0-1.4.0\Projects\zst #
#                          ack\Utilities\Transmit\Source\TransmitApp.c" -D    #
#                          MT_TASK -D ZTOOL_P1 -D MT_SYS_FUNC -D MT_ZDO_FUNC  #
#                          -D LCD_SUPPORTED=DEBUG -D                          #
#                          ZDNWKMGR_MIN_TRANSMISSIONS=0 -lC "D:\Texas         #
#                          Instruments\ZStack-CC2530-2.4.0-1.4.0\Projects\zst #
#                          ack\Utilities\Transmit\CC2530DB\CoordinatorEB\List #
#                          \" -lA "D:\Texas Instruments\ZStack-CC2530-2.4.0-1 #
#                          .4.0\Projects\zstack\Utilities\Transmit\CC2530DB\C #
#                          oordinatorEB\List\" --diag_suppress Pe001,Pa010    #
#                          -o "D:\Texas Instruments\ZStack-CC2530-2.4.0-1.4.0 #
#                          \Projects\zstack\Utilities\Transmit\CC2530DB\Coord #
#                          inatorEB\Obj\" -e --require_prototypes             #
#                          --no_code_motion --debug --core=plain --dptr=16,1  #
#                          --data_model=large --code_model=banked             #
#                          --calling_convention=xdata_reentrant               #
#                          --place_constants=data_rom --nr_virtual_regs 16    #
#                          -I "D:\Texas Instruments\ZStack-CC2530-2.4.0-1.4.0 #
#                          \Projects\zstack\Utilities\Transmit\CC2530DB\" -I  #
#                          "D:\Texas Instruments\ZStack-CC2530-2.4.0-1.4.0\Pr #
#                          ojects\zstack\Utilities\Transmit\CC2530DB\..\Sourc #
#                          e\" -I "D:\Texas Instruments\ZStack-CC2530-2.4.0-1 #
#                          .4.0\Projects\zstack\Utilities\Transmit\CC2530DB\. #
#                          .\..\..\ZMain\TI2530DB\" -I "D:\Texas              #
#                          Instruments\ZStack-CC2530-2.4.0-1.4.0\Projects\zst #
#                          ack\Utilities\Transmit\CC2530DB\..\..\..\..\..\Com #
#                          ponents\hal\include\" -I "D:\Texas                 #
#                          Instruments\ZStack-CC2530-2.4.0-1.4.0\Projects\zst #
#                          ack\Utilities\Transmit\CC2530DB\..\..\..\..\..\Com #
#                          ponents\hal\target\CC2530EB\" -I "D:\Texas         #
#                          Instruments\ZStack-CC2530-2.4.0-1.4.0\Projects\zst #
#                          ack\Utilities\Transmit\CC2530DB\..\..\..\..\..\Com #
#                          ponents\mac\include\" -I "D:\Texas                 #
#                          Instruments\ZStack-CC2530-2.4.0-1.4.0\Projects\zst #
#                          ack\Utilities\Transmit\CC2530DB\..\..\..\..\..\Com #
#                          ponents\mac\high_level\" -I "D:\Texas              #
#                          Instruments\ZStack-CC2530-2.4.0-1.4.0\Projects\zst #
#                          ack\Utilities\Transmit\CC2530DB\..\..\..\..\..\Com #
#                          ponents\mac\low_level\srf04\" -I "D:\Texas         #
#                          Instruments\ZStack-CC2530-2.4.0-1.4.0\Projects\zst #
#                          ack\Utilities\Transmit\CC2530DB\..\..\..\..\..\Com #
#                          ponents\mac\low_level\srf04\single_chip\" -I       #
#                          "D:\Texas Instruments\ZStack-CC2530-2.4.0-1.4.0\Pr #
#                          ojects\zstack\Utilities\Transmit\CC2530DB\..\..\.. #
#                          \..\..\Components\mt\" -I "D:\Texas                #
#                          Instruments\ZStack-CC2530-2.4.0-1.4.0\Projects\zst #
#                          ack\Utilities\Transmit\CC2530DB\..\..\..\..\..\Com #
#                          ponents\osal\include\" -I "D:\Texas                #
#                          Instruments\ZStack-CC2530-2.4.0-1.4.0\Projects\zst #
#                          ack\Utilities\Transmit\CC2530DB\..\..\..\..\..\Com #
#                          ponents\osal\mcu\ccsoc\" -I "D:\Texas              #
#                          Instruments\ZStack-CC2530-2.4.0-1.4.0\Projects\zst #
#                          ack\Utilities\Transmit\CC2530DB\..\..\..\..\..\Com #
#                          ponents\services\saddr\" -I "D:\Texas              #
#                          Instruments\ZStack-CC2530-2.4.0-1.4.0\Projects\zst #
#                          ack\Utilities\Transmit\CC2530DB\..\..\..\..\..\Com #
#                          ponents\services\sdata\" -I "D:\Texas              #
#                          Instruments\ZStack-CC2530-2.4.0-1.4.0\Projects\zst #
#                          ack\Utilities\Transmit\CC2530DB\..\..\..\..\..\Com #
#                          ponents\stack\af\" -I "D:\Texas                    #
#                          Instruments\ZStack-CC2530-2.4.0-1.4.0\Projects\zst #
#                          ack\Utilities\Transmit\CC2530DB\..\..\..\..\..\Com #
#                          ponents\stack\nwk\" -I "D:\Texas                   #
#                          Instruments\ZStack-CC2530-2.4.0-1.4.0\Projects\zst #
#                          ack\Utilities\Transmit\CC2530DB\..\..\..\..\..\Com #
#                          ponents\stack\sapi\" -I "D:\Texas                  #
#                          Instruments\ZStack-CC2530-2.4.0-1.4.0\Projects\zst #
#                          ack\Utilities\Transmit\CC2530DB\..\..\..\..\..\Com #
#                          ponents\stack\sec\" -I "D:\Texas                   #
#                          Instruments\ZStack-CC2530-2.4.0-1.4.0\Projects\zst #
#                          ack\Utilities\Transmit\CC2530DB\..\..\..\..\..\Com #
#                          ponents\stack\sys\" -I "D:\Texas                   #
#                          Instruments\ZStack-CC2530-2.4.0-1.4.0\Projects\zst #
#                          ack\Utilities\Transmit\CC2530DB\..\..\..\..\..\Com #
#                          ponents\stack\zdo\" -I "D:\Texas                   #
#                          Instruments\ZStack-CC2530-2.4.0-1.4.0\Projects\zst #
#                          ack\Utilities\Transmit\CC2530DB\..\..\..\..\..\Com #
#                          ponents\zmac\" -I "D:\Texas                        #
#                          Instruments\ZStack-CC2530-2.4.0-1.4.0\Projects\zst #
#                          ack\Utilities\Transmit\CC2530DB\..\..\..\..\..\Com #
#                          ponents\zmac\f8w\" -I "D:\Program Files\IAR        #
#                          Systems\Embedded Workbench 5.4\8051\INC\" -I       #
#                          "D:\Program Files\IAR Systems\Embedded Workbench   #
#                          5.4\8051\INC\CLIB\" -Ohz                           #
#    List file          =  D:\Texas Instruments\ZStack-CC2530-2.4.0-1.4.0\Pro #
#                          jects\zstack\Utilities\Transmit\CC2530DB\Coordinat #
#                          orEB\List\TransmitApp.lst                          #
#    Object file        =  D:\Texas Instruments\ZStack-CC2530-2.4.0-1.4.0\Pro #
#                          jects\zstack\Utilities\Transmit\CC2530DB\Coordinat #
#                          orEB\Obj\TransmitApp.r51                           #
#                                                                             #
#                                                                             #
###############################################################################

D:\Texas Instruments\ZStack-CC2530-2.4.0-1.4.0\Projects\zstack\Utilities\Transmit\Source\TransmitApp.c
      1          /**************************************************************************************************
      2            Filename:       TransmitApp.c
      3            Revised:        $Date: 2009-03-12 10:06:30 -0700 (Thu, 12 Mar 2009) $
      4            Revision:       $Revision: 19395 $
      5          
      6            Description:    Transmit Application (no Profile).
      7          
      8          
      9            Copyright 2004-2009 Texas Instruments Incorporated. All rights reserved.
     10          
     11            IMPORTANT: Your use of this Software is limited to those specific rights
     12            granted under the terms of a software license agreement between the user
     13            who downloaded the software, his/her employer (which must be your employer)
     14            and Texas Instruments Incorporated (the "License").  You may not use this
     15            Software unless you agree to abide by the terms of the License. The License
     16            limits your use, and you acknowledge, that the Software may not be modified,
     17            copied or distributed unless embedded on a Texas Instruments microcontroller
     18            or used solely and exclusively in conjunction with a Texas Instruments radio
     19            frequency transceiver, which is integrated into your product.  Other than for
     20            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     21            works of, modify, distribute, perform, display or sell this Software and/or
     22            its documentation for any purpose.
     23          
     24            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     25            PROVIDED “AS IS?WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     26            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     27            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     28            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     29            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     30            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     31            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     32            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     33            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     34            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     35          
     36            Should you have any questions regarding your right to use this Software,
     37            contact Texas Instruments Incorporated at www.TI.com.
     38          **************************************************************************************************/
     39          
     40          /*********************************************************************
     41            This application will send a data packet to another
     42            tranmitApp device as fast as it can.  The receiving
     43            transmitApp device will calculate the following transmit
     44            rate statistics:
     45              - Number bytes in the last second
     46              - Number of seconds running
     47              - Average number of bytes per second
     48              - Number of packets received.
     49          
     50            The application will send one message and as soon as it
     51            receives the confirmation for that message it will send
     52            the next message.
     53          
     54            If you would like a delay between messages
     55            define TRANSMITAPP_DELAY_SEND and set the delay amount
     56            in TRANSMITAPP_SEND_DELAY.
     57          
     58            TransmitApp_MaxDataLength defines the message size
     59          
     60            Set TRANSMITAPP_TX_OPTIONS to AF_MSG_ACK_REQUEST to send
     61            the message expecting an APS ACK, this will decrease your
     62            throughput.  Set TRANSMITAPP_TX_OPTIONS to 0 for no
     63            APS ACK.
     64          
     65            This applications doesn't have a profile, so it handles
     66            everything directly - itself.
     67          
     68            Key control:
     69              SW1:  Starts and stops the transmitting
     70              SW2:  initiates end device binding
     71              SW3:  Resets the display totals
     72              SW4:  initiates a match description request
     73          
     74            Notes:
     75          
     76              This application was intended to be used to test the maximum
     77              throughput between 2 devices in a network - between routers
     78              coordinators.
     79          
     80              Although not recommended, it can be used between
     81              an end device and a router (or coordinator), but you must
     82              enable the delay feature (TRANSMITAPP_DELAY_SEND and
     83              TRANSMITAPP_SEND_DELAY).  If you don't include the delay, the
     84              end device can't receive messages because it will stop polling.
     85              Also, the delay must be greater than RESPONSE_POLL_RATE (default 100 MSec).
     86          *********************************************************************/
     87          
     88          /*********************************************************************
     89           * INCLUDES
     90           */
     91          #include "OSAL.h"
     92          #include "AF.h"
     93          #include "ZDObject.h"
     94          #include "ZDProfile.h"
     95          
     96          #include "TransmitApp.h"
     97          #include "OnBoard.h"

   \                                 In  segment SFR_AN, at 0x90
   \   union <unnamed> volatile __sfr _A_P1
   \                     _A_P1:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xfd
   \   unsigned char volatile __sfr P0DIR
   \                     P0DIR:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xfe
   \   unsigned char volatile __sfr P1DIR
   \                     P1DIR:
   \   000000                DS 1
     98          
     99          #include "DebugTrace.h"
    100          
    101          /* HAL */
    102          #include "hal_lcd.h"
    103          #include "hal_led.h"
    104          #include "hal_key.h"
    105          #include "hal_uart.h"
    106          
    107          /*********************************************************************
    108           * MACROS
    109           */
    110          
    111          /*********************************************************************
    112           * CONSTANTS
    113           */
    114          //#define TRANSMITAPP_RANDOM_LEN 
    115          
    116          #define TRANSMITAPP_STATE_WAITING 0
    117          #define TRANSMITAPP_STATE_SENDING 1
    118          
    119          #if !defined ( RTR_NWK )
    120            // Use these 2 lines to add a delay between each packet sent
    121            //  - default for end devices
    122            #define TRANSMITAPP_DELAY_SEND
    123            #define TRANSMITAPP_SEND_DELAY    (RESPONSE_POLL_RATE * 2)  // in MSecs
    124          #endif
    125          
    126          // Send with or without APS ACKs
    127          //#define TRANSMITAPP_TX_OPTIONS    (AF_DISCV_ROUTE | AF_ACK_REQUEST)
    128          #define TRANSMITAPP_TX_OPTIONS    AF_DISCV_ROUTE
    129          
    130          #define TRANSMITAPP_INITIAL_MSG_COUNT  2
    131          
    132          #define TRANSMITAPP_TRANSMIT_TIME   4  // 4 MS
    133          #define TRANSMITAPP_DISPLAY_TIMER   (2 * 1000)
    134          
    135          #if defined ( TRANSMITAPP_FRAGMENTED )
    136          #define TRANSMITAPP_MAX_DATA_LEN    225
    137          #else
    138          #define TRANSMITAPP_MAX_DATA_LEN    102
    139          #endif
    140          
    141          /*********************************************************************
    142           * TYPEDEFS
    143           */
    144          
    145          /*********************************************************************
    146           * GLOBAL VARIABLES
    147           */
    148          
    149          // This is the buffer that is sent out as data.

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    150          byte TransmitApp_Msg[ TRANSMITAPP_MAX_DATA_LEN ];
   \                     TransmitApp_Msg:
   \   000000                DS 102
   \   000066                REQUIRE __INIT_XDATA_Z
    151          
    152          // This is the Cluster ID List and should be filled with Application
    153          // specific cluster IDs.

   \                                 In  segment XDATA_ROM_C, align 1
    154          const cId_t TransmitApp_ClusterList[TRANSMITAPP_MAX_CLUSTERS] =
   \                     TransmitApp_ClusterList:
   \   000000   0100         DW 1
    155          {
    156            TRANSMITAPP_CLUSTERID_TESTMSG  // MSG Cluster ID
    157          };
    158          

   \                                 In  segment XDATA_ROM_C, align 1
    159          const SimpleDescriptionFormat_t TransmitApp_SimpleDesc =
   \                     TransmitApp_SimpleDesc:
   \   000000   01           DB 1
   \   000001   050F0100     DW 3845, 1
   \   000005   0001         DB 0, 1
   \   000007   ....         DW TransmitApp_ClusterList
   \   000009   01           DB 1
   \   00000A   ....         DW TransmitApp_ClusterList
    160          {
    161            TRANSMITAPP_ENDPOINT,              //  int    Endpoint;
    162            TRANSMITAPP_PROFID,                //  uint16 AppProfId[2];
    163            TRANSMITAPP_DEVICEID,              //  uint16 AppDeviceId[2];
    164            TRANSMITAPP_DEVICE_VERSION,        //  int    AppDevVer:4;
    165            TRANSMITAPP_FLAGS,                 //  int    AppFlags:4;
    166            TRANSMITAPP_MAX_CLUSTERS,          //  byte   AppNumInClusters;
    167            (cId_t *)TransmitApp_ClusterList,  //  byte   *pAppInClusterList;
    168            TRANSMITAPP_MAX_CLUSTERS,          //  byte   AppNumInClusters;
    169            (cId_t *)TransmitApp_ClusterList   //  byte   *pAppInClusterList;
    170          };
    171          
    172          // This is the Endpoint/Interface description.  It is defined here, but
    173          // filled-in in TransmitApp_Init().  Another way to go would be to fill
    174          // in the structure here and make it a "const" (in code space).  The
    175          // way it's defined in this sample app it is define in RAM.

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    176          endPointDesc_t TransmitApp_epDesc;
   \                     TransmitApp_epDesc:
   \   000000                DS 6
   \   000006                REQUIRE __INIT_XDATA_Z
    177          
    178          /*********************************************************************
    179           * EXTERNAL VARIABLES
    180           */
    181          
    182          /*********************************************************************
    183           * EXTERNAL FUNCTIONS
    184           */
    185          
    186          /*********************************************************************
    187           * LOCAL VARIABLES
    188           */
    189          
    190          // Task ID for event processing - received when TransmitApp_Init() is called.

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    191          byte TransmitApp_TaskID;
   \                     TransmitApp_TaskID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    192          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    193          devStates_t TransmitApp_NwkState;
   \                     TransmitApp_NwkState:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    194          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    195          static byte TransmitApp_TransID;  // This is the unique message ID (counter)
   \                     TransmitApp_TransID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    196          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    197          afAddrType_t TransmitApp_DstAddr;
   \                     TransmitApp_DstAddr:
   \   000000                DS 12
   \   00000C                REQUIRE __INIT_XDATA_Z
    198          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    199          byte TransmitApp_State;
   \                     TransmitApp_State:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    200          
    201          // Shadow of the OSAL system clock used for calculating actual time expired.

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    202          static uint32 clkShdw;
   \                     clkShdw:
   \   000000                DS 4
   \   000004                REQUIRE __INIT_XDATA_Z
    203          // Running total count of test messages recv/sent since beginning current run.

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    204          static uint32 rxTotal, txTotal;
   \                     rxTotal:
   \   000000                DS 4
   \   000004                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
   \                     txTotal:
   \   000000                DS 4
   \   000004                REQUIRE __INIT_XDATA_Z
    205          // Running count of test messages recv/sent since last display / update - 1 Hz.

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    206          static uint32 rxAccum, txAccum;
   \                     rxAccum:
   \   000000                DS 4
   \   000004                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
   \                     txAccum:
   \   000000                DS 4
   \   000004                REQUIRE __INIT_XDATA_Z
    207          
    208          static byte timerOn;
    209          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    210          static byte timesToSend;
   \                     timesToSend:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    211          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    212          uint16 pktCounter;
   \                     pktCounter:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
    213          
    214          // Max Data Request Length

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    215          uint16 TransmitApp_MaxDataLength;
   \                     TransmitApp_MaxDataLength:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
    216          
    217          //---pan

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    218            static uint8 light = 0;
   \                     light:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    219            static uint8 alarm = 0;
   \                     alarm:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    220            
    221          /*********************************************************************
    222           * LOCAL FUNCTIONS
    223           */
    224          void TransmitApp_ProcessZDOMsgs( zdoIncomingMsg_t *inMsg );
    225          void TransmitApp_HandleKeys( byte shift, byte keys );
    226          void TransmitApp_MessageMSGCB( afIncomingMSGPacket_t *pckt );
    227          void TransmitApp_SendTheMessage( void );
    228          void TransmitApp_ChangeState( void );
    229          
    230          /*********************************************************************
    231           * NETWORK LAYER CALLBACKS
    232           */
    233          
    234          /*********************************************************************
    235           * PUBLIC FUNCTIONS
    236           */
    237          void TransmitApp_DisplayResults( void );
    238          
    239          /*********************************************************************
    240           * @fn      TransmitApp_Init
    241           *
    242           * @brief   Initialization function for the Generic App Task.
    243           *          This is called during initialization and should contain
    244           *          any application specific initialization (ie. hardware
    245           *          initialization/setup, table initialization, power up
    246           *          notificaiton ... ).
    247           *
    248           * @param   task_id - the ID assigned by OSAL.  This ID should be
    249           *                    used to send messages and set timers.
    250           *
    251           * @return  none
    252           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    253          void TransmitApp_Init( byte task_id )
   \                     TransmitApp_Init:
    254          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 2
   \   000005   74FE         MOV     A,#-0x2
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   E9           MOV     A,R1
    255          #if !defined ( TRANSMITAPP_FRAGMENTED )
    256            afDataReqMTU_t mtu;
    257          #endif
    258            uint16 i;
    259          
    260            TransmitApp_TaskID = task_id;
   \   00000B   90....       MOV     DPTR,#TransmitApp_TaskID
   \   00000E   F0           MOVX    @DPTR,A
    261            TransmitApp_NwkState = DEV_INIT;
   \   00000F   7401         MOV     A,#0x1
   \   000011   90....       MOV     DPTR,#TransmitApp_NwkState
   \   000014   F0           MOVX    @DPTR,A
    262            TransmitApp_TransID = 0;
   \   000015   E4           CLR     A
   \   000016   90....       MOV     DPTR,#TransmitApp_TransID
   \   000019   F0           MOVX    @DPTR,A
    263          
    264            pktCounter = 0;
   \   00001A   90....       MOV     DPTR,#pktCounter
   \   00001D   F0           MOVX    @DPTR,A
   \   00001E   A3           INC     DPTR
   \   00001F   F0           MOVX    @DPTR,A
    265          
    266            TransmitApp_State = TRANSMITAPP_STATE_WAITING;
   \   000020   90....       MOV     DPTR,#TransmitApp_State
   \   000023   F0           MOVX    @DPTR,A
    267          
    268            // Device hardware initialization can be added here or in main() (Zmain.c).
    269            // If the hardware is application specific - add it here.
    270            // If the hardware is other parts of the device add it in main().
    271          
    272            TransmitApp_DstAddr.addrMode = (afAddrMode_t)AddrNotPresent;
   \   000024   90....       MOV     DPTR,#(TransmitApp_DstAddr + 8)
   \   000027   F0           MOVX    @DPTR,A
    273            TransmitApp_DstAddr.endPoint = 0;
   \   000028   90....       MOV     DPTR,#(TransmitApp_DstAddr + 9)
   \   00002B   F0           MOVX    @DPTR,A
    274            TransmitApp_DstAddr.addr.shortAddr = 0;
   \   00002C   90....       MOV     DPTR,#TransmitApp_DstAddr
   \   00002F   F0           MOVX    @DPTR,A
   \   000030   A3           INC     DPTR
   \   000031   F0           MOVX    @DPTR,A
    275          
    276            // Fill out the endpoint description.
    277            TransmitApp_epDesc.endPoint = TRANSMITAPP_ENDPOINT;
   \   000032   7401         MOV     A,#0x1
   \   000034   90....       MOV     DPTR,#TransmitApp_epDesc
   \   000037   F0           MOVX    @DPTR,A
    278            TransmitApp_epDesc.task_id = &TransmitApp_TaskID;
   \   000038   90....       MOV     DPTR,#(TransmitApp_epDesc + 1)
   \   00003B   74..         MOV     A,#(TransmitApp_TaskID & 0xff)
   \   00003D   F0           MOVX    @DPTR,A
   \   00003E   A3           INC     DPTR
   \   00003F   74..         MOV     A,#((TransmitApp_TaskID >> 8) & 0xff)
   \   000041   F0           MOVX    @DPTR,A
    279            TransmitApp_epDesc.simpleDesc
    280                      = (SimpleDescriptionFormat_t *)&TransmitApp_SimpleDesc;
   \   000042   90....       MOV     DPTR,#(TransmitApp_epDesc + 3)
   \   000045   74..         MOV     A,#(TransmitApp_SimpleDesc & 0xff)
   \   000047   F0           MOVX    @DPTR,A
   \   000048   A3           INC     DPTR
   \   000049   74..         MOV     A,#((TransmitApp_SimpleDesc >> 8) & 0xff)
   \   00004B   F0           MOVX    @DPTR,A
    281            TransmitApp_epDesc.latencyReq = noLatencyReqs;
   \   00004C   E4           CLR     A
   \   00004D   90....       MOV     DPTR,#(TransmitApp_epDesc + 5)
   \   000050   F0           MOVX    @DPTR,A
    282          
    283            // Register the endpoint/interface description with the AF
    284            afRegister( &TransmitApp_epDesc );
   \   000051                ; Setup parameters for call to function afRegister
   \   000051   7A..         MOV     R2,#(TransmitApp_epDesc & 0xff)
   \   000053   7B..         MOV     R3,#((TransmitApp_epDesc >> 8) & 0xff)
   \   000055   12....       LCALL   ??afRegister?relay
    285          
    286            // Register for all key events - This app will handle all key events
    287            RegisterForKeys( TransmitApp_TaskID );
   \   000058                ; Setup parameters for call to function RegisterForKeys
   \   000058   90....       MOV     DPTR,#TransmitApp_TaskID
   \   00005B   E0           MOVX    A,@DPTR
   \   00005C   F9           MOV     R1,A
   \   00005D   12....       LCALL   ??RegisterForKeys?relay
    288          
    289            // Update the display
    290          #if defined ( LCD_SUPPORTED )
    291            HalLcdWriteString( "TransmitApp", HAL_LCD_LINE_2 );
   \   000060                ; Setup parameters for call to function HalLcdWriteString
   \   000060   7902         MOV     R1,#0x2
   \   000062   7A..         MOV     R2,#(`?<Constant "TransmitApp">` & 0xff)
   \   000064   7B..         MOV     R3,#((`?<Constant "TransmitApp">` >> 8) & 0xff)
   \   000066   12....       LCALL   ??HalLcdWriteString?relay
    292          #endif
    293          
    294            // Set the data length
    295          #if defined ( TRANSMITAPP_FRAGMENTED )
    296            TransmitApp_MaxDataLength = TRANSMITAPP_MAX_DATA_LEN;
    297          #else
    298            mtu.kvp        = FALSE;
   \   000069   E4           CLR     A
   \   00006A   85..82       MOV     DPL,?XSP + 0
   \   00006D   85..83       MOV     DPH,?XSP + 1
   \   000070   F0           MOVX    @DPTR,A
    299            mtu.aps.secure = FALSE;
   \   000071   7401         MOV     A,#0x1
   \   000073   12....       LCALL   ?XSTACK_DISP0_8
   \   000076   E4           CLR     A
   \   000077   F0           MOVX    @DPTR,A
    300            TransmitApp_MaxDataLength = afDataReqMTU( &mtu );
   \   000078                ; Setup parameters for call to function afDataReqMTU
   \   000078   85..82       MOV     DPL,?XSP + 0
   \   00007B   85..83       MOV     DPH,?XSP + 1
   \   00007E   AA82         MOV     R2,DPL
   \   000080   AB83         MOV     R3,DPH
   \   000082   12....       LCALL   ??afDataReqMTU?relay
   \   000085   E9           MOV     A,R1
   \   000086   90....       MOV     DPTR,#TransmitApp_MaxDataLength
   \   000089   F0           MOVX    @DPTR,A
   \   00008A   A3           INC     DPTR
   \   00008B   E4           CLR     A
   \   00008C   F0           MOVX    @DPTR,A
    301          #endif
    302          
    303            // Generate the data
    304            for (i=0; i<TransmitApp_MaxDataLength; i++)
   \   00008D   F8           MOV     R0,A
   \   00008E   8012         SJMP    ??TransmitApp_Init_0
    305            {
    306              TransmitApp_Msg[i] = (uint8) i;
   \                     ??TransmitApp_Init_1:
   \   000090   E8           MOV     A,R0
   \   000091   24..         ADD     A,#(TransmitApp_Msg & 0xff)
   \   000093   F582         MOV     DPL,A
   \   000095   E9           MOV     A,R1
   \   000096   34..         ADDC    A,#((TransmitApp_Msg >> 8) & 0xff)
   \   000098   F583         MOV     DPH,A
   \   00009A   E8           MOV     A,R0
   \   00009B   F0           MOVX    @DPTR,A
    307            }
   \   00009C   2401         ADD     A,#0x1
   \   00009E   08           INC     R0
   \   00009F   E9           MOV     A,R1
   \   0000A0   3400         ADDC    A,#0x0
   \                     ??TransmitApp_Init_0:
   \   0000A2   F9           MOV     R1,A
   \   0000A3   90....       MOV     DPTR,#TransmitApp_MaxDataLength
   \   0000A6   E0           MOVX    A,@DPTR
   \   0000A7   FA           MOV     R2,A
   \   0000A8   A3           INC     DPTR
   \   0000A9   E0           MOVX    A,@DPTR
   \   0000AA   FB           MOV     R3,A
   \   0000AB   C3           CLR     C
   \   0000AC   E8           MOV     A,R0
   \   0000AD   9A           SUBB    A,R2
   \   0000AE   E9           MOV     A,R1
   \   0000AF   9B           SUBB    A,R3
   \   0000B0   40DE         JC      ??TransmitApp_Init_1
    308          
    309            ZDO_RegisterForZDOMsg( TransmitApp_TaskID, End_Device_Bind_rsp );
   \   0000B2                ; Setup parameters for call to function ZDO_RegisterForZDOMsg
   \   0000B2   7A20         MOV     R2,#0x20
   \   0000B4   7B80         MOV     R3,#-0x80
   \   0000B6   90....       MOV     DPTR,#TransmitApp_TaskID
   \   0000B9   E0           MOVX    A,@DPTR
   \   0000BA   F9           MOV     R1,A
   \   0000BB   12....       LCALL   ??ZDO_RegisterForZDOMsg?relay
    310            ZDO_RegisterForZDOMsg( TransmitApp_TaskID, Match_Desc_rsp );
   \   0000BE                ; Setup parameters for call to function ZDO_RegisterForZDOMsg
   \   0000BE   7A06         MOV     R2,#0x6
   \   0000C0   7B80         MOV     R3,#-0x80
   \   0000C2   90....       MOV     DPTR,#TransmitApp_TaskID
   \   0000C5   E0           MOVX    A,@DPTR
   \   0000C6   F9           MOV     R1,A
   \   0000C7   12....       LCALL   ??ZDO_RegisterForZDOMsg?relay
    311            
    312              //---pan
    313              HalLedSet ( HAL_LED_1, HAL_LED_MODE_BLINK );
   \   0000CA                ; Setup parameters for call to function HalLedSet
   \   0000CA   7A02         MOV     R2,#0x2
   \   0000CC   7901         MOV     R1,#0x1
   \   0000CE   12....       LCALL   ??HalLedSet?relay
    314              HalLedSet ( HAL_LED_2, HAL_LED_MODE_OFF );
   \   0000D1                ; Setup parameters for call to function HalLedSet
   \   0000D1   7A00         MOV     R2,#0x0
   \   0000D3   7902         MOV     R1,#0x2
   \   0000D5   12....       LCALL   ??HalLedSet?relay
    315              HalLedSet ( HAL_LED_3, HAL_LED_MODE_OFF );
   \   0000D8                ; Setup parameters for call to function HalLedSet
   \   0000D8   7A00         MOV     R2,#0x0
   \   0000DA   7904         MOV     R1,#0x4
   \   0000DC   12....       LCALL   ??HalLedSet?relay
    316              HalLedSet ( HAL_LED_4, HAL_LED_MODE_OFF );
   \   0000DF                ; Setup parameters for call to function HalLedSet
   \   0000DF   7A00         MOV     R2,#0x0
   \   0000E1   7908         MOV     R1,#0x8
   \   0000E3   12....       LCALL   ??HalLedSet?relay
    317              
    318              uart_sent( "Home Automation --Start!!\n",0);
   \   0000E6                ; Setup parameters for call to function uart_sent
   \   0000E6   7900         MOV     R1,#0x0
   \   0000E8   7A..         MOV     R2,#(`?<Constant "Home Automation --Sta...">` & 0xff)
   \   0000EA   7B..         MOV     R3,#((`?<Constant "Home Automation --Sta...">` >> 8) & 0xff)
   \   0000EC   12....       LCALL   ??uart_sent?relay
    319          }
   \   0000EF   7402         MOV     A,#0x2
   \   0000F1   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000F4   7F01         MOV     R7,#0x1
   \   0000F6   02....       LJMP    ?BANKED_LEAVE_XDATA
    320          
    321          /*********************************************************************
    322           * @fn      TransmitApp_ProcessEvent
    323           *
    324           * @brief   Generic Application Task event processor.  This function
    325           *          is called to process all events for the task.  Events
    326           *          include timers, messages and any other user defined events.
    327           *
    328           * @param   task_id  - The OSAL assigned task ID.
    329           * @param   events - events to process.  This is a bit map and can
    330           *                   contain more than one event.
    331           *
    332           * @return  none
    333           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    334          UINT16 TransmitApp_ProcessEvent( byte task_id, UINT16 events )
   \                     TransmitApp_ProcessEvent:
    335          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    336            afIncomingMSGPacket_t *MSGpkt;
    337            afDataConfirm_t *afDataConfirm;
    338            (void)task_id;  // Intentionally unreferenced parameter
    339          
    340            // Data Confirmation message fields
    341            ZStatus_t sentStatus;
    342            byte sentEP;
    343          
    344            if ( events & SYS_EVENT_MSG )
   \   000009   7480         MOV     A,#-0x80
   \   00000B   5F           ANL     A,R7
   \   00000C   F9           MOV     R1,A
   \   00000D   E4           CLR     A
   \   00000E   7001         JNZ     ??TransmitApp_ProcessEvent_0
   \   000010   E9           MOV     A,R1
   \                     ??TransmitApp_ProcessEvent_0:
   \   000011   7003         JNZ     $+5
   \   000013   02....       LJMP    ??TransmitApp_ProcessEvent_1 & 0xFFFF
    345            {
    346              MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( TransmitApp_TaskID );
   \   000016                ; Setup parameters for call to function osal_msg_receive
   \   000016   800E         SJMP    ??TransmitApp_ProcessEvent_2
    347              while ( MSGpkt )
    348              {
    349                switch ( MSGpkt->hdr.event )
    350                {
    351                  case ZDO_CB_MSG:
    352                    TransmitApp_ProcessZDOMsgs( (zdoIncomingMsg_t *)MSGpkt );
   \                     ??TransmitApp_ProcessEvent_3:
   \   000018                ; Setup parameters for call to function TransmitApp_ProcessZDOMsgs
   \   000018   AA..         MOV     R2,?V0 + 0
   \   00001A   AB..         MOV     R3,?V0 + 1
   \   00001C   12....       LCALL   ??TransmitApp_ProcessZDOMsgs?relay
    353                    break;
    354          
    355                  case KEY_CHANGE:
    356                    TransmitApp_HandleKeys( ((keyChange_t *)MSGpkt)->state, ((keyChange_t *)MSGpkt)->keys );
    357                    break;
    358          
    359                  case AF_DATA_CONFIRM_CMD:
    360                    // This message is received as a confirmation of a data packet sent.
    361                    // The status is of ZStatus_t type [defined in ZComDef.h]
    362                    // The message fields are defined in AF.h
    363                    afDataConfirm = (afDataConfirm_t *)MSGpkt;
    364                    sentEP = afDataConfirm->endpoint;
    365                    sentStatus = afDataConfirm->hdr.status;
    366          
    367                    if ( (ZSuccess == sentStatus) &&
    368                         (TransmitApp_epDesc.endPoint == sentEP) )
    369                    {
    370                      HalLedSet ( HAL_LED_1, HAL_LED_MODE_BLINK );
    371          //#if !defined ( TRANSMITAPP_RANDOM_LEN )
    372          //            txAccum += TransmitApp_MaxDataLength;
    373          //#endif
    374          //            if ( !timerOn )
    375          //            {
    376          //              osal_start_timerEx( TransmitApp_TaskID,TRANSMITAPP_RCVTIMER_EVT,
    377          //                                                     TRANSMITAPP_DISPLAY_TIMER);
    378          //              clkShdw = osal_GetSystemClock();
    379          //              timerOn = TRUE;
    380          //            }
    381                    }
    382          
    383                    // Action taken when confirmation is received: Send the next message.
    384                    //TransmitApp_SetSendEvt();
    385                    break;
    386          
    387                  case AF_INCOMING_MSG_CMD:
    388                    TransmitApp_MessageMSGCB( MSGpkt );
    389                    break;
    390          
    391                  case ZDO_STATE_CHANGE:
    392                    TransmitApp_NwkState = (devStates_t)(MSGpkt->hdr.status);
    393                    break;
    394          
    395                  default:
    396                    break;
    397                }
    398          
    399                // Release the memory
    400                osal_msg_deallocate( (uint8 *)MSGpkt );
   \                     ??TransmitApp_ProcessEvent_4:
   \   00001F                ; Setup parameters for call to function osal_msg_deallocate
   \   00001F   AA..         MOV     R2,?V0 + 0
   \   000021   AB..         MOV     R3,?V0 + 1
   \   000023   12....       LCALL   ??osal_msg_deallocate?relay
    401          
    402                // Next
    403                MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( TransmitApp_TaskID );
   \   000026                ; Setup parameters for call to function osal_msg_receive
   \                     ??TransmitApp_ProcessEvent_2:
   \   000026   90....       MOV     DPTR,#TransmitApp_TaskID
   \   000029   E0           MOVX    A,@DPTR
   \   00002A   F9           MOV     R1,A
   \   00002B   12....       LCALL   ??osal_msg_receive?relay
   \   00002E   8A..         MOV     ?V0 + 0,R2
   \   000030   8B..         MOV     ?V0 + 1,R3
   \   000032   E5..         MOV     A,?V0 + 0
   \   000034   7002         JNZ     ??TransmitApp_ProcessEvent_5
   \   000036   E5..         MOV     A,?V0 + 1
   \                     ??TransmitApp_ProcessEvent_5:
   \   000038   6062         JZ      ??TransmitApp_ProcessEvent_6
   \   00003A   85..82       MOV     DPL,?V0 + 0
   \   00003D   85..83       MOV     DPH,?V0 + 1
   \   000040   E0           MOVX    A,@DPTR
   \   000041   12....       LCALL   ?UC_SWITCH_SPARSE
   \                     `?<Jumptable for TransmitApp_ProcessEvent>_0`:
   \   000044   00           DB        0
   \   000045   05           DB        5
   \   000046   1A           DB        26
   \   000047   ....         DW        ??TransmitApp_ProcessEvent_7
   \   000049   C0           DB        192
   \   00004A   ....         DW        ??TransmitApp_ProcessEvent_8
   \   00004C   D1           DB        209
   \   00004D   ....         DW        ??TransmitApp_ProcessEvent_9
   \   00004F   D3           DB        211
   \   000050   ....         DW        ??TransmitApp_ProcessEvent_3
   \   000052   FD           DB        253
   \   000053   ....         DW        ??TransmitApp_ProcessEvent_10
   \   000055   ....         DW        ??TransmitApp_ProcessEvent_4
   \                     ??TransmitApp_ProcessEvent_8:
   \   000057                ; Setup parameters for call to function TransmitApp_HandleKeys
   \   000057   85..82       MOV     DPL,?V0 + 0
   \   00005A   85..83       MOV     DPH,?V0 + 1
   \   00005D   A3           INC     DPTR
   \   00005E   A3           INC     DPTR
   \   00005F   A3           INC     DPTR
   \   000060   12....       LCALL   ?Subroutine9 & 0xFFFF
   \                     ??CrossCallReturnLabel_14:
   \   000063   F9           MOV     R1,A
   \   000064   12....       LCALL   ??TransmitApp_HandleKeys?relay
   \   000067   80B6         SJMP    ??TransmitApp_ProcessEvent_4
   \                     ??TransmitApp_ProcessEvent_10:
   \   000069   85..82       MOV     DPL,?V0 + 0
   \   00006C   85..83       MOV     DPH,?V0 + 1
   \   00006F   A3           INC     DPTR
   \   000070   E0           MOVX    A,@DPTR
   \   000071   70AC         JNZ     ??TransmitApp_ProcessEvent_4
   \   000073   90....       MOV     DPTR,#TransmitApp_epDesc
   \   000076   12....       LCALL   ?Subroutine9 & 0xFFFF
   \                     ??CrossCallReturnLabel_15:
   \   000079   6A           XRL     A,R2
   \   00007A   70A3         JNZ     ??TransmitApp_ProcessEvent_4
   \   00007C                ; Setup parameters for call to function HalLedSet
   \   00007C   7A02         MOV     R2,#0x2
   \   00007E   7901         MOV     R1,#0x1
   \   000080   12....       LCALL   ??HalLedSet?relay
   \   000083   809A         SJMP    ??TransmitApp_ProcessEvent_4
   \                     ??TransmitApp_ProcessEvent_7:
   \   000085                ; Setup parameters for call to function TransmitApp_MessageMSGCB
   \   000085   AA..         MOV     R2,?V0 + 0
   \   000087   AB..         MOV     R3,?V0 + 1
   \   000089   12....       LCALL   ??TransmitApp_MessageMSGCB?relay
   \   00008C   8091         SJMP    ??TransmitApp_ProcessEvent_4
   \                     ??TransmitApp_ProcessEvent_9:
   \   00008E   85..82       MOV     DPL,?V0 + 0
   \   000091   85..83       MOV     DPH,?V0 + 1
   \   000094   A3           INC     DPTR
   \   000095   E0           MOVX    A,@DPTR
   \   000096   90....       MOV     DPTR,#TransmitApp_NwkState
   \   000099   F0           MOVX    @DPTR,A
   \   00009A   8083         SJMP    ??TransmitApp_ProcessEvent_4
    404              }
    405          
    406              // Squash compiler warnings until values are used.
    407              (void)sentStatus;
    408              (void)sentEP;
    409          
    410              // Return unprocessed events
    411              return (events ^ SYS_EVENT_MSG);
   \                     ??TransmitApp_ProcessEvent_6:
   \   00009C   EE           MOV     A,R6
   \   00009D   FA           MOV     R2,A
   \   00009E   7480         MOV     A,#-0x80
   \   0000A0   6F           XRL     A,R7
   \                     ??TransmitApp_ProcessEvent_11:
   \   0000A1   FB           MOV     R3,A
   \   0000A2   8033         SJMP    ??TransmitApp_ProcessEvent_12
    412            }
    413          
    414            // Send a message out
    415            if ( events & TRANSMITAPP_SEND_MSG_EVT )
   \                     ??TransmitApp_ProcessEvent_1:
   \   0000A4   EE           MOV     A,R6
   \   0000A5   A2E0         MOV     C,0xE0 /* A   */.0
   \   0000A7   5014         JNC     ??TransmitApp_ProcessEvent_13
    416            {
    417              if ( TransmitApp_State == TRANSMITAPP_STATE_SENDING )
   \   0000A9   90....       MOV     DPTR,#TransmitApp_State
   \   0000AC   E0           MOVX    A,@DPTR
   \   0000AD   6401         XRL     A,#0x1
   \   0000AF   7005         JNZ     ??TransmitApp_ProcessEvent_14
    418              { TransmitApp_State = TRANSMITAPP_STATE_WAITING;
   \   0000B1   E4           CLR     A
   \   0000B2   F0           MOVX    @DPTR,A
    419                TransmitApp_SendTheMessage();
   \   0000B3                ; Setup parameters for call to function TransmitApp_SendTheMessage
   \   0000B3   12....       LCALL   ??TransmitApp_SendTheMessage?relay
    420              }
    421          
    422              // Return unprocessed events
    423              return (events ^ TRANSMITAPP_SEND_MSG_EVT);
   \                     ??TransmitApp_ProcessEvent_14:
   \   0000B6   7401         MOV     A,#0x1
   \                     ??TransmitApp_ProcessEvent_15:
   \   0000B8   6E           XRL     A,R6
   \   0000B9   FA           MOV     R2,A
   \   0000BA   EF           MOV     A,R7
   \   0000BB   80E4         SJMP    ??TransmitApp_ProcessEvent_11
    424            }
    425          
    426            // Timed wait from error
    427            if ( events & TRANSMITAPP_SEND_ERR_EVT )
   \                     ??TransmitApp_ProcessEvent_13:
   \   0000BD   5404         ANL     A,#0x4
   \   0000BF   6007         JZ      ??TransmitApp_ProcessEvent_16
    428            {
    429              TransmitApp_SetSendEvt();
   \   0000C1                ; Setup parameters for call to function TransmitApp_SetSendEvt
   \   0000C1   12....       LCALL   ??TransmitApp_SetSendEvt?relay
    430          
    431              // Return unprocessed events
    432              return (events ^ TRANSMITAPP_SEND_ERR_EVT);
   \   0000C4   7404         MOV     A,#0x4
   \   0000C6   80F0         SJMP    ??TransmitApp_ProcessEvent_15
    433            }
    434          
    435            // Receive timer
    436            if ( events & TRANSMITAPP_RCVTIMER_EVT )
   \                     ??TransmitApp_ProcessEvent_16:
   \   0000C8   EE           MOV     A,R6
   \   0000C9   5402         ANL     A,#0x2
   \   0000CB   6006         JZ      ??TransmitApp_ProcessEvent_17
    437            {
    438              // Setup to display the next result
    439              //osal_start_timerEx( TransmitApp_TaskID, TRANSMITAPP_RCVTIMER_EVT,
    440              //                                        TRANSMITAPP_DISPLAY_TIMER );
    441              //TransmitApp_DisplayResults();
    442          
    443              return (events ^ TRANSMITAPP_RCVTIMER_EVT);
   \   0000CD   7402         MOV     A,#0x2
   \   0000CF   6E           XRL     A,R6
   \   0000D0   FA           MOV     R2,A
   \   0000D1   8004         SJMP    ??TransmitApp_ProcessEvent_12
    444            }
    445            
    446          
    447            // Discard unknown events
    448            return 0;
   \                     ??TransmitApp_ProcessEvent_17:
   \   0000D3   7A00         MOV     R2,#0x0
   \   0000D5   7B00         MOV     R3,#0x0
   \                     ??TransmitApp_ProcessEvent_12:
   \   0000D7                REQUIRE ?Subroutine0
   \   0000D7                ; // Fall through to label ?Subroutine0
    449          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   7F04         MOV     R7,#0x4
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine9:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   FA           MOV     R2,A
   \   000002   85..82       MOV     DPL,?V0 + 0
   \   000005   85..83       MOV     DPH,?V0 + 1
   \   000008   A3           INC     DPTR
   \   000009   A3           INC     DPTR
   \   00000A   E0           MOVX    A,@DPTR
   \   00000B   22           RET
    450          
    451          /*********************************************************************
    452           * Event Generation Functions
    453           */
    454          /*********************************************************************
    455           * @fn      TransmitApp_ProcessZDOMsgs()
    456           *
    457           * @brief   Process response messages
    458           *
    459           * @param   none
    460           *
    461           * @return  none
    462           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    463          void TransmitApp_ProcessZDOMsgs( zdoIncomingMsg_t *inMsg )
   \                     TransmitApp_ProcessZDOMsgs:
    464          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
    465            switch ( inMsg->clusterID )
   \   000005   EA           MOV     A,R2
   \   000006   240C         ADD     A,#0xc
   \   000008   F582         MOV     DPL,A
   \   00000A   EB           MOV     A,R3
   \   00000B   12....       LCALL   ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_26:
   \   00000E   E0           MOVX    A,@DPTR
   \   00000F   F5..         MOV     ?V0 + 0,A
   \   000011   A3           INC     DPTR
   \   000012   E0           MOVX    A,@DPTR
   \   000013   F5..         MOV     ?V0 + 1,A
   \   000015   78..         MOV     R0,#?V0 + 0
   \   000017   12....       LCALL   ?US_SWITCH_SPARSE
   \                     `?<Jumptable for TransmitApp_ProcessZDOMsgs>_0`:
   \   00001A   0000         DW        0
   \   00001C   0200         DW        2
   \   00001E   0680         DW        32774
   \   000020   ....         DW        ??TransmitApp_ProcessZDOMsgs_0
   \   000022   2080         DW        32800
   \   000024   ....         DW        ??TransmitApp_ProcessZDOMsgs_1
   \   000026   ....         DW        ??TransmitApp_ProcessZDOMsgs_2
    466            {
    467              case End_Device_Bind_rsp:
    468                if ( ZDO_ParseBindRsp( inMsg ) == ZSuccess )
   \                     ??TransmitApp_ProcessZDOMsgs_1:
   \   000028   EA           MOV     A,R2
   \   000029   2413         ADD     A,#0x13
   \   00002B   12....       LCALL   ?Subroutine8 & 0xFFFF
   \                     ??CrossCallReturnLabel_12:
   \   00002E   E0           MOVX    A,@DPTR
   \   00002F   7900         MOV     R1,#0x0
   \   000031   7010         JNZ     ??TransmitApp_ProcessZDOMsgs_3
    469                { uart_sent("Bind Success!\n",0);
   \   000033                ; Setup parameters for call to function uart_sent
   \   000033   7A..         MOV     R2,#(`?<Constant "Bind Success!\\n">` & 0xff)
   \   000035   7B..         MOV     R3,#((`?<Constant "Bind Success!\\n">` >> 8) & 0xff)
   \   000037   12....       LCALL   ??uart_sent?relay
    470                  // Light LED
    471                  HalLedSet( HAL_LED_2, HAL_LED_MODE_ON );
   \   00003A                ; Setup parameters for call to function HalLedSet
   \   00003A   7A01         MOV     R2,#0x1
   \                     ??TransmitApp_ProcessZDOMsgs_4:
   \   00003C   7902         MOV     R1,#0x2
   \   00003E   12....       LCALL   ??HalLedSet?relay
   \   000041   805F         SJMP    ??TransmitApp_ProcessZDOMsgs_2
    472                }
    473          #if defined(BLINK_LEDS)
    474                else
    475                { uart_sent("Bind failure!\n",0);
   \                     ??TransmitApp_ProcessZDOMsgs_3:
   \   000043                ; Setup parameters for call to function uart_sent
   \   000043   7A..         MOV     R2,#(`?<Constant "Bind failure!\\n">` & 0xff)
   \   000045   7B..         MOV     R3,#((`?<Constant "Bind failure!\\n">` >> 8) & 0xff)
   \   000047   12....       LCALL   ??uart_sent?relay
    476                  // Flash LED to show failure
    477                  HalLedSet ( HAL_LED_2, HAL_LED_MODE_FLASH );
   \   00004A                ; Setup parameters for call to function HalLedSet
   \   00004A   7A04         MOV     R2,#0x4
   \   00004C   80EE         SJMP    ??TransmitApp_ProcessZDOMsgs_4
    478                }
    479          #endif
    480                break;
    481          
    482              case Match_Desc_rsp:
    483                {
    484                  ZDO_ActiveEndpointRsp_t *pRsp = ZDO_ParseEPListRsp( inMsg );
   \                     ??TransmitApp_ProcessZDOMsgs_0:
   \   00004E                ; Setup parameters for call to function ZDO_ParseEPListRsp
   \   00004E   12....       LCALL   ??ZDO_ParseEPListRsp?relay
   \   000051   8A..         MOV     ?V0 + 0,R2
   \   000053   8B..         MOV     ?V0 + 1,R3
   \   000055   AE..         MOV     R6,?V0 + 0
   \   000057   AF..         MOV     R7,?V0 + 1
    485                  if ( pRsp )
   \   000059   EE           MOV     A,R6
   \   00005A   7001         JNZ     ??TransmitApp_ProcessZDOMsgs_5
   \   00005C   EF           MOV     A,R7
   \                     ??TransmitApp_ProcessZDOMsgs_5:
   \   00005D   6043         JZ      ??TransmitApp_ProcessZDOMsgs_2
    486                  {
    487                    if ( pRsp->status == ZSuccess && pRsp->cnt )
   \   00005F   8E82         MOV     DPL,R6
   \   000061   8F83         MOV     DPH,R7
   \   000063   E0           MOVX    A,@DPTR
   \   000064   7035         JNZ     ??TransmitApp_ProcessZDOMsgs_6
   \   000066   A3           INC     DPTR
   \   000067   A3           INC     DPTR
   \   000068   A3           INC     DPTR
   \   000069   E0           MOVX    A,@DPTR
   \   00006A   602F         JZ      ??TransmitApp_ProcessZDOMsgs_6
    488                    { 
    489                      TransmitApp_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
   \   00006C   7402         MOV     A,#0x2
   \   00006E   90....       MOV     DPTR,#(TransmitApp_DstAddr + 8)
   \   000071   F0           MOVX    @DPTR,A
    490                      TransmitApp_DstAddr.addr.shortAddr = pRsp->nwkAddr;
   \   000072   8E82         MOV     DPL,R6
   \   000074   8F83         MOV     DPH,R7
   \   000076   A3           INC     DPTR
   \   000077   E0           MOVX    A,@DPTR
   \   000078   F8           MOV     R0,A
   \   000079   A3           INC     DPTR
   \   00007A   E0           MOVX    A,@DPTR
   \   00007B   F9           MOV     R1,A
   \   00007C   90....       MOV     DPTR,#TransmitApp_DstAddr
   \   00007F   E8           MOV     A,R0
   \   000080   F0           MOVX    @DPTR,A
   \   000081   A3           INC     DPTR
   \   000082   E9           MOV     A,R1
   \   000083   12....       LCALL   ?Subroutine5 & 0xFFFF
    491                      // Take the first endpoint, Can be changed to search through endpoints
    492                      TransmitApp_DstAddr.endPoint = pRsp->epList[0];
   \                     ??CrossCallReturnLabel_6:
   \   000086   E0           MOVX    A,@DPTR
   \   000087   90....       MOV     DPTR,#(TransmitApp_DstAddr + 9)
   \   00008A   F0           MOVX    @DPTR,A
    493                      
    494                      uart_sent("Match_Desc_rsp Sucess!\n",0);
   \   00008B                ; Setup parameters for call to function uart_sent
   \   00008B   7900         MOV     R1,#0x0
   \   00008D   7A..         MOV     R2,#(`?<Constant "Match_Desc_rsp Sucess!\\n">` & 0xff)
   \   00008F   7B..         MOV     R3,#((`?<Constant "Match_Desc_rsp Sucess!\\n">` >> 8) & 0xff)
   \   000091   12....       LCALL   ??uart_sent?relay
    495                      // Light LED
    496                      HalLedSet( HAL_LED_2, HAL_LED_MODE_ON );
   \   000094                ; Setup parameters for call to function HalLedSet
   \   000094   7A01         MOV     R2,#0x1
   \   000096   7902         MOV     R1,#0x2
   \   000098   12....       LCALL   ??HalLedSet?relay
    497                    }
    498                    osal_mem_free( pRsp );
   \                     ??TransmitApp_ProcessZDOMsgs_6:
   \   00009B                ; Setup parameters for call to function osal_mem_free
   \   00009B   EE           MOV     A,R6
   \   00009C   FA           MOV     R2,A
   \   00009D   EF           MOV     A,R7
   \   00009E   FB           MOV     R3,A
   \   00009F   12....       LCALL   ??osal_mem_free?relay
    499                  }
    500                }
    501                break;
    502            }
    503          }
   \                     ??TransmitApp_ProcessZDOMsgs_2:
   \   0000A2                REQUIRE ?Subroutine1
   \   0000A2                ; // Fall through to label ?Subroutine1

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   7F02         MOV     R7,#0x2
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine16_0:
   \   000000   3400         ADDC    A,#0x0
   \   000002   F583         MOV     DPH,A
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine8:
   \   000000   F582         MOV     DPL,A
   \   000002   EB           MOV     A,R3
   \   000003   3400         ADDC    A,#0x0
   \   000005   F583         MOV     DPH,A
   \   000007   E0           MOVX    A,@DPTR
   \   000008   F8           MOV     R0,A
   \   000009   A3           INC     DPTR
   \   00000A   E0           MOVX    A,@DPTR
   \   00000B   F583         MOV     DPH,A
   \   00000D   8882         MOV     DPL,R0
   \   00000F   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine5:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   8E82         MOV     DPL,R6
   \   000003   8F83         MOV     DPH,R7
   \   000005   A3           INC     DPTR
   \   000006   A3           INC     DPTR
   \   000007   A3           INC     DPTR
   \   000008   A3           INC     DPTR
   \   000009   22           RET
    504          
    505          /*********************************************************************
    506           * @fn      TransmitApp_HandleKeys
    507           *
    508           * @brief   Handles all key events for this device.
    509           *
    510           * @param   shift - true if in shift/alt.
    511           * @param   keys - bit field for key events. Valid entries:
    512           *                 EVAL_SW4
    513           *                 EVAL_SW3
    514           *                 EVAL_SW2
    515           *                 EVAL_SW1
    516           *
    517           * @return  none
    518           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    519          void TransmitApp_HandleKeys( byte shift, byte keys )
   \                     TransmitApp_HandleKeys:
    520          {
   \   000000   74F5         MOV     A,#-0xb
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 11
   \   000005                ; Auto size: 9
   \   000005   74F7         MOV     A,#-0x9
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   E9           MOV     A,R1
   \   00000B   FE           MOV     R6,A
   \   00000C   EA           MOV     A,R2
   \   00000D   FF           MOV     R7,A
    521            zAddrType_t dstAddr;
    522             HalLedSet ( HAL_LED_1, HAL_LED_MODE_BLINK );
   \   00000E                ; Setup parameters for call to function HalLedSet
   \   00000E   7A02         MOV     R2,#0x2
   \   000010   7901         MOV     R1,#0x1
   \   000012   12....       LCALL   ??HalLedSet?relay
    523            // Shift is used to make each button/switch dual purpose.
    524            if ( shift )
   \   000015   EE           MOV     A,R6
   \   000016   6003         JZ      $+5
   \   000018   02....       LJMP    ??CrossCallReturnLabel_5 & 0xFFFF
    525            {
    526              if ( keys & HAL_KEY_SW_1 )
    527              {
    528              }
    529              if ( keys & HAL_KEY_SW_2 )
    530              {
    531              }
    532              if ( keys & HAL_KEY_SW_3 )
    533              {
    534              }
    535              if ( keys & HAL_KEY_SW_4 )
    536              {
    537              }
    538            }
    539            else
    540            {
    541              if ( keys & HAL_KEY_KEY_1 )
   \   00001B   EF           MOV     A,R7
   \   00001C   A2E0         MOV     C,0xE0 /* A   */.0
   \   00001E   5009         JNC     ??TransmitApp_HandleKeys_0
    542              {   //uart_sent( "Initiate a Match Description Request (Service Discovery) \n",0);
    543                uart_sent("<---",0);
   \   000020                ; Setup parameters for call to function uart_sent
   \   000020   7900         MOV     R1,#0x0
   \   000022   7A..         MOV     R2,#(`?<Constant "<---">` & 0xff)
   \   000024   7B..         MOV     R3,#((`?<Constant "<---">` >> 8) & 0xff)
   \   000026   12....       LCALL   ??uart_sent?relay
    544          //      rxTotal = txTotal = 0;
    545          //      rxAccum = txAccum = 0;
    546          //      TransmitApp_DisplayResults();
    547          //      HalLedSet ( HAL_LED_2, HAL_LED_MODE_OFF );
    548          //
    549                // Initiate a Match Description Request (Service Discovery)
    550          //      dstAddr.addrMode = AddrBroadcast;
    551          //      dstAddr.addr.shortAddr = NWK_BROADCAST_SHORTADDR;
    552          //      ZDP_MatchDescReq( &dstAddr, NWK_BROADCAST_SHORTADDR,
    553          //                        TRANSMITAPP_PROFID,
    554          //                        TRANSMITAPP_MAX_CLUSTERS, (cId_t *)TransmitApp_ClusterList,
    555          //                        TRANSMITAPP_MAX_CLUSTERS, (cId_t *)TransmitApp_ClusterList,
    556          //                        FALSE );      
    557              }
    558          
    559              if ( keys & HAL_KEY_KEY_2 )
   \                     ??TransmitApp_HandleKeys_0:
   \   000029   EF           MOV     A,R7
   \   00002A   A2E1         MOV     C,0xE0 /* A   */.1
   \   00002C   5076         JNC     ??TransmitApp_HandleKeys_1
    560              { uart_sent("Binding~\n",0);
   \   00002E                ; Setup parameters for call to function uart_sent
   \   00002E   7900         MOV     R1,#0x0
   \   000030   7A..         MOV     R2,#(`?<Constant "Binding~\\n">` & 0xff)
   \   000032   7B..         MOV     R3,#((`?<Constant "Binding~\\n">` >> 8) & 0xff)
   \   000034   12....       LCALL   ??uart_sent?relay
    561                HalLedSet ( HAL_LED_2, HAL_LED_MODE_OFF );
   \   000037                ; Setup parameters for call to function HalLedSet
   \   000037   7A00         MOV     R2,#0x0
   \   000039   7902         MOV     R1,#0x2
   \   00003B   12....       LCALL   ??HalLedSet?relay
    562          
    563                // Initiate an End Device Bind Request for the mandatory endpoint
    564                dstAddr.addrMode = Addr16Bit;
   \   00003E   7408         MOV     A,#0x8
   \   000040   12....       LCALL   ?XSTACK_DISP0_8
   \   000043   7402         MOV     A,#0x2
   \   000045   F0           MOVX    @DPTR,A
    565                dstAddr.addr.shortAddr = 0x0000; // Coordinator
   \   000046   85..82       MOV     DPL,?XSP + 0
   \   000049   85..83       MOV     DPH,?XSP + 1
   \   00004C   E4           CLR     A
   \   00004D   F0           MOVX    @DPTR,A
   \   00004E   A3           INC     DPTR
   \   00004F   F0           MOVX    @DPTR,A
    566                ZDP_EndDeviceBindReq( &dstAddr, NLME_GetShortAddr(),
    567                                      TransmitApp_epDesc.endPoint,
    568                                      TRANSMITAPP_PROFID,
    569                                      TRANSMITAPP_MAX_CLUSTERS, (cId_t *)TransmitApp_ClusterList,
    570                                      TRANSMITAPP_MAX_CLUSTERS, (cId_t *)TransmitApp_ClusterList,
    571                                      FALSE );
   \   000050                ; Setup parameters for call to function NLME_GetShortAddr
   \   000050   12....       LCALL   ??NLME_GetShortAddr?relay
   \   000053   8A..         MOV     ?V0 + 0,R2
   \   000055   8B..         MOV     ?V0 + 1,R3
   \   000057   AC..         MOV     R4,?V0 + 0
   \   000059   AD..         MOV     R5,?V0 + 1
   \   00005B   75....       MOV     ?V0 + 0,#(TransmitApp_ClusterList & 0xff)
   \   00005E   75....       MOV     ?V0 + 1,#((TransmitApp_ClusterList >> 8) & 0xff)
   \   000061                ; Setup parameters for call to function ZDP_EndDeviceBindReq
   \   000061   75..00       MOV     ?V0 + 2,#0x0
   \   000064   78..         MOV     R0,#?V0 + 2
   \   000066   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000069   78..         MOV     R0,#?V0 + 0
   \   00006B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00006E   75..01       MOV     ?V0 + 2,#0x1
   \   000071   78..         MOV     R0,#?V0 + 2
   \   000073   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000076   78..         MOV     R0,#?V0 + 0
   \   000078   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00007B   75..01       MOV     ?V0 + 0,#0x1
   \   00007E   78..         MOV     R0,#?V0 + 0
   \   000080   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000083   75..05       MOV     ?V0 + 0,#0x5
   \   000086   75..0F       MOV     ?V0 + 1,#0xf
   \   000089   78..         MOV     R0,#?V0 + 0
   \   00008B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00008E   90....       MOV     DPTR,#TransmitApp_epDesc
   \   000091   E0           MOVX    A,@DPTR
   \   000092   F9           MOV     R1,A
   \   000093   7409         MOV     A,#0x9
   \   000095   12....       LCALL   ?XSTACK_DISP0_8
   \   000098   AA82         MOV     R2,DPL
   \   00009A   AB83         MOV     R3,DPH
   \   00009C   12....       LCALL   ??ZDP_EndDeviceBindReq?relay
   \   00009F   7409         MOV     A,#0x9
   \   0000A1   12....       LCALL   ?DEALLOC_XSTACK8
    572              }
    573          
    574              if ( keys & HAL_KEY_KEY_3 )     //¿ª¹ØµÆ
   \                     ??TransmitApp_HandleKeys_1:
   \   0000A4   EF           MOV     A,R7
   \   0000A5   A2E2         MOV     C,0xE0 /* A   */.2
   \   0000A7   501B         JNC     ??CrossCallReturnLabel_4
    575              {
    576                light = !light;
   \   0000A9   90....       MOV     DPTR,#light
   \   0000AC   E0           MOVX    A,@DPTR
   \   0000AD   700B         JNZ     ??TransmitApp_HandleKeys_2
   \   0000AF   7401         MOV     A,#0x1
   \   0000B1   F0           MOVX    @DPTR,A
    577          
    578                if(light)
    579                { 
    580                 uart_sent("sent light on cmd---\n",0);
   \   0000B2                ; Setup parameters for call to function uart_sent
   \   0000B2   7900         MOV     R1,#0x0
   \   0000B4   7A..         MOV     R2,#(`?<Constant "sent light on cmd---\\n">` & 0xff)
   \   0000B6   7B..         MOV     R3,#((`?<Constant "sent light on cmd---\\n">` >> 8) & 0xff)
   \   0000B8   8007         SJMP    ??TransmitApp_HandleKeys_3
    581                }
   \                     ??TransmitApp_HandleKeys_2:
   \   0000BA   E4           CLR     A
   \   0000BB   F0           MOVX    @DPTR,A
    582                else
    583                {
    584                  uart_sent("sent light off cmd---\n",0);
   \   0000BC                ; Setup parameters for call to function uart_sent
   \   0000BC   F9           MOV     R1,A
   \   0000BD   7A..         MOV     R2,#(`?<Constant "sent light off cmd---\\n">` & 0xff)
   \   0000BF   7B..         MOV     R3,#((`?<Constant "sent light off cmd---\\n">` >> 8) & 0xff)
    585                }
    586                
    587          
    588                TransmitApp_State = TRANSMITAPP_STATE_SENDING;
    589                timesToSend = 2;
    590                TransmitApp_SetSendEvt();
    591                //TransmitApp_ChangeState();
    592              
    593              }
   \                     ??TransmitApp_HandleKeys_3:
   \   0000C1   12....       LCALL   ?Subroutine4 & 0xFFFF
    594          
    595              if ( keys & HAL_KEY_KEY_4 )     //±¨¾¯
   \                     ??CrossCallReturnLabel_4:
   \   0000C4   EF           MOV     A,R7
   \   0000C5   A2E3         MOV     C,0xE0 /* A   */.3
   \   0000C7   501B         JNC     ??CrossCallReturnLabel_5
    596              { alarm = !alarm;
   \   0000C9   90....       MOV     DPTR,#alarm
   \   0000CC   E0           MOVX    A,@DPTR
   \   0000CD   700B         JNZ     ??TransmitApp_HandleKeys_4
   \   0000CF   7401         MOV     A,#0x1
   \   0000D1   F0           MOVX    @DPTR,A
    597          
    598                if(alarm)
    599                {  
    600                 uart_sent("sent alarm on cmd---\n",0);
   \   0000D2                ; Setup parameters for call to function uart_sent
   \   0000D2   7900         MOV     R1,#0x0
   \   0000D4   7A..         MOV     R2,#(`?<Constant "sent alarm on cmd---\\n">` & 0xff)
   \   0000D6   7B..         MOV     R3,#((`?<Constant "sent alarm on cmd---\\n">` >> 8) & 0xff)
   \   0000D8   8007         SJMP    ??TransmitApp_HandleKeys_5
    601                }
   \                     ??TransmitApp_HandleKeys_4:
   \   0000DA   E4           CLR     A
   \   0000DB   F0           MOVX    @DPTR,A
    602                else
    603                {
    604                  uart_sent("sent alrm off cmd---\n",0);
   \   0000DC                ; Setup parameters for call to function uart_sent
   \   0000DC   F9           MOV     R1,A
   \   0000DD   7A..         MOV     R2,#(`?<Constant "sent alrm off cmd---\\n">` & 0xff)
   \   0000DF   7B..         MOV     R3,#((`?<Constant "sent alrm off cmd---\\n">` >> 8) & 0xff)
    605                }       
    606          
    607                TransmitApp_State = TRANSMITAPP_STATE_SENDING;
    608                timesToSend = 2;
    609                TransmitApp_SetSendEvt();
    610          
    611              }
    612            }
   \                     ??TransmitApp_HandleKeys_5:
   \   0000E1   12....       LCALL   ?Subroutine4 & 0xFFFF
    613          }
   \                     ??CrossCallReturnLabel_5:
   \   0000E4   7409         MOV     A,#0x9
   \   0000E6   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000E9   7F03         MOV     R7,#0x3
   \   0000EB   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine4:
   \   000000   12....       LCALL   ??uart_sent?relay
   \   000003   7401         MOV     A,#0x1
   \   000005   90....       MOV     DPTR,#TransmitApp_State
   \   000008   F0           MOVX    @DPTR,A
   \   000009   7402         MOV     A,#0x2
   \   00000B   90....       MOV     DPTR,#timesToSend
   \   00000E   F0           MOVX    @DPTR,A
   \   00000F                ; Setup parameters for call to function TransmitApp_SetSendEvt
   \   00000F                ; Setup parameters for call to function TransmitApp_SetSendEvt
   \   00000F   12....       LCALL   ??TransmitApp_SetSendEvt?relay
   \   000012   22           RET
    614          
    615          /*********************************************************************
    616           * LOCAL FUNCTIONS
    617           */
    618          
    619          /*********************************************************************
    620           * @fn      TransmitApp_MessageMSGCB
    621           *
    622           * @brief   Data message processor callback.  This function processes
    623           *          any incoming data - probably from other devices.  So, based
    624           *          on cluster ID, perform the intended action.
    625           *
    626           * @param   none
    627           *
    628           * @return  none
    629           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    630          void TransmitApp_MessageMSGCB( afIncomingMSGPacket_t *pkt )
   \                     TransmitApp_MessageMSGCB:
    631          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
   \   000005   8A..         MOV     ?V0 + 0,R2
   \   000007   8B..         MOV     ?V0 + 1,R3
    632            int16 i,j;
                           ^
Warning[Pe177]: variable "j" was declared but never referenced
    633            uint8 error = FALSE;
                         ^
Warning[Pe177]: variable "error" was declared but never referenced

  static byte timerOn;
              ^
"D:\Texas Instruments\ZStack-CC2530-2.4.0-1.4.0\Projects\zstack\Utilities\Transmit\Source\TransmitApp.c",208  Warning[Pe177]: 
          variable "timerOn" was declared but never referenced
    634          
    635            switch ( pkt->clusterId )
   \   000009   8A82         MOV     DPL,R2
   \   00000B   8B83         MOV     DPH,R3
   \   00000D   A3           INC     DPTR
   \   00000E   A3           INC     DPTR
   \   00000F   A3           INC     DPTR
   \   000010   A3           INC     DPTR
   \   000011   E0           MOVX    A,@DPTR
   \   000012   6401         XRL     A,#0x1
   \   000014   7002         JNZ     ??TransmitApp_MessageMSGCB_0
   \   000016   A3           INC     DPTR
   \   000017   E0           MOVX    A,@DPTR
   \                     ??TransmitApp_MessageMSGCB_0:
   \   000018   6003         JZ      $+5
   \   00001A   02....       LJMP    ??TransmitApp_MessageMSGCB_1 & 0xFFFF
    636            {
    637              case TRANSMITAPP_CLUSTERID_TESTMSG:
    638          //#if !defined ( TRANSMITAPP_RANDOM_LEN )
    639          //      if (pkt->cmd.DataLength != TransmitApp_MaxDataLength)
    640          //      {
    641          //        error = TRUE;
    642          //      }
    643          //#endif
    644          
    645          //      for (i=4; i<pkt->cmd.DataLength; i++)
    646          //      {
    647          //        if (pkt->cmd.Data[i] != i%256)
    648          //          error = TRUE;
    649          //      }
    650          //      if (error)
    651          //      {
    652          //        // Display error LED
    653          //        HalLedSet(HAL_LED_1, HAL_LED_MODE_ON);
    654          //      }
    655          //      else
    656          //      {
    657          //        if ( !timerOn )
    658          //        {
    659          //          osal_start_timerEx( TransmitApp_TaskID, TRANSMITAPP_RCVTIMER_EVT,
    660          //                                                  TRANSMITAPP_DISPLAY_TIMER );
    661          //          clkShdw = osal_GetSystemClock();
    662          //          timerOn = TRUE;
    663          //        }
    664          //        rxAccum += pkt->cmd.DataLength;
    665          //      }
    666          //----------------------------      
    667                //µÆ¹â
    668                if (pkt->cmd.Data[4] == 100)
   \   00001D   EA           MOV     A,R2
   \   00001E   2421         ADD     A,#0x21
   \   000020   12....       LCALL   ?Subroutine8 & 0xFFFF
   \                     ??CrossCallReturnLabel_13:
   \   000023   A3           INC     DPTR
   \   000024   A3           INC     DPTR
   \   000025   A3           INC     DPTR
   \   000026   A3           INC     DPTR
   \   000027   E0           MOVX    A,@DPTR
   \   000028   6464         XRL     A,#0x64
   \   00002A   7007         JNZ     ??TransmitApp_MessageMSGCB_2
    669                {P1DIR |= 0x01;
   \   00002C   43FE01       ORL     0xfe,#0x1
    670                 P1    |= 0x01;
   \   00002F   D290         SETB    0x90.0
   \   000031   8014         SJMP    ??TransmitApp_MessageMSGCB_3
    671                }
    672                else if (pkt->cmd.Data[4] == 0) //¹ØµÆ
   \                     ??TransmitApp_MessageMSGCB_2:
   \   000033   EA           MOV     A,R2
   \   000034   2421         ADD     A,#0x21
   \   000036   F582         MOV     DPL,A
   \   000038   EB           MOV     A,R3
   \   000039   12....       LCALL   ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_27:
   \   00003C   12....       LCALL   ?Subroutine14 & 0xFFFF
   \                     ??CrossCallReturnLabel_22:
   \   00003F   E0           MOVX    A,@DPTR
   \   000040   7005         JNZ     ??TransmitApp_MessageMSGCB_3
    673                {
    674                 P1DIR |= 0x01;
   \   000042   43FE01       ORL     0xfe,#0x1
    675                 P1    &= ~0x01;
   \   000045   C290         CLR     0x90.0
    676                }
    677                
    678                if (pkt->cmd.Data[5] == 1)//±¨¾¯
   \                     ??TransmitApp_MessageMSGCB_3:
   \   000047   12....       LCALL   ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_8:
   \   00004A   6401         XRL     A,#0x1
   \   00004C   7007         JNZ     ??TransmitApp_MessageMSGCB_4
    679                {P1DIR |= 0x02;
   \   00004E   43FE02       ORL     0xfe,#0x2
    680                 P1    |= 0x02;
   \   000051   D291         SETB    0x90.1
   \   000053   8007         SJMP    ??TransmitApp_MessageMSGCB_5
    681                }
    682                else if (pkt->cmd.Data[5] == 0) 
   \                     ??TransmitApp_MessageMSGCB_4:
   \   000055   12....       LCALL   ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_9:
   \   000058   7002         JNZ     ??TransmitApp_MessageMSGCB_5
    683                {
    684                 //P1DIR &= ~0x02;
    685                 P1    &= ~0x02;
   \   00005A   C291         CLR     0x90.1
    686                }      
    687                
    688                uint8 *buf;
    689               // uint8 tmp;
    690                buf = (uint8 *)osal_mem_alloc( 27 );
   \                     ??TransmitApp_MessageMSGCB_5:
   \   00005C                ; Setup parameters for call to function osal_mem_alloc
   \   00005C   7A1B         MOV     R2,#0x1b
   \   00005E   7B00         MOV     R3,#0x0
   \   000060   12....       LCALL   ??osal_mem_alloc?relay
   \   000063   8A..         MOV     ?V0 + 2,R2
   \   000065   8B..         MOV     ?V0 + 3,R3
   \   000067   AE..         MOV     R6,?V0 + 2
   \   000069   AF..         MOV     R7,?V0 + 3
    691                if(buf)
   \   00006B   EE           MOV     A,R6
   \   00006C   7001         JNZ     ??TransmitApp_MessageMSGCB_6
   \   00006E   EF           MOV     A,R7
   \                     ??TransmitApp_MessageMSGCB_6:
   \   00006F   7003         JNZ     $+5
   \   000071   02....       LJMP    ??TransmitApp_MessageMSGCB_1 & 0xFFFF
    692                {
    693                  for( i =0; i <6 ;i++)
   \   000074   7800         MOV     R0,#0x0
   \   000076   7900         MOV     R1,#0x0
    694                  {
    695                    buf[i*5+2] = '0'+(pkt->cmd.Data[i])/100;
   \                     ??TransmitApp_MessageMSGCB_7:
   \   000078   E8           MOV     A,R0
   \   000079   FA           MOV     R2,A
   \   00007A   E9           MOV     A,R1
   \   00007B   FB           MOV     R3,A
   \   00007C   EA           MOV     A,R2
   \   00007D   75F005       MOV     B,#0x5
   \   000080   A4           MUL     AB
   \   000081   FA           MOV     R2,A
   \   000082   ACF0         MOV     R4,B
   \   000084   75F005       MOV     B,#0x5
   \   000087   EB           MOV     A,R3
   \   000088   A4           MUL     AB
   \   000089   2C           ADD     A,R4
   \   00008A   FB           MOV     R3,A
   \   00008B   EE           MOV     A,R6
   \   00008C   2A           ADD     A,R2
   \   00008D   FA           MOV     R2,A
   \   00008E   EF           MOV     A,R7
   \   00008F   3B           ADDC    A,R3
   \   000090   FB           MOV     R3,A
   \   000091   E5..         MOV     A,?V0 + 0
   \   000093   2421         ADD     A,#0x21
   \   000095   FC           MOV     R4,A
   \   000096   E5..         MOV     A,?V0 + 1
   \   000098   3400         ADDC    A,#0x0
   \   00009A   FD           MOV     R5,A
   \   00009B   75F064       MOV     B,#0x64
   \   00009E   12....       LCALL   ?Subroutine7 & 0xFFFF
   \                     ??CrossCallReturnLabel_10:
   \   0000A1   12....       LCALL   ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_24:
   \   0000A4   F0           MOVX    @DPTR,A
    696                    buf[i*5+3] = '0'+(pkt->cmd.Data[i]/10)%10;
   \   0000A5   75F00A       MOV     B,#0xa
   \   0000A8   12....       LCALL   ?Subroutine7 & 0xFFFF
   \                     ??CrossCallReturnLabel_11:
   \   0000AB   12....       LCALL   ?Subroutine13 & 0xFFFF
   \                     ??CrossCallReturnLabel_20:
   \   0000AE   F0           MOVX    @DPTR,A
    697                    buf[i*5+4] = '0'+(pkt->cmd.Data[i])%10;
   \   0000AF   8C82         MOV     DPL,R4
   \   0000B1   8D83         MOV     DPH,R5
   \   0000B3   E0           MOVX    A,@DPTR
   \   0000B4   28           ADD     A,R0
   \   0000B5   FC           MOV     R4,A
   \   0000B6   A3           INC     DPTR
   \   0000B7   E0           MOVX    A,@DPTR
   \   0000B8   39           ADDC    A,R1
   \   0000B9   8C82         MOV     DPL,R4
   \   0000BB   F583         MOV     DPH,A
   \   0000BD   E0           MOVX    A,@DPTR
   \   0000BE   12....       LCALL   ?Subroutine13 & 0xFFFF
    698                  }
   \                     ??CrossCallReturnLabel_21:
   \   0000C1   A3           INC     DPTR
   \   0000C2   F0           MOVX    @DPTR,A
   \   0000C3   E8           MOV     A,R0
   \   0000C4   2401         ADD     A,#0x1
   \   0000C6   08           INC     R0
   \   0000C7   E9           MOV     A,R1
   \   0000C8   3400         ADDC    A,#0x0
   \   0000CA   F9           MOV     R1,A
   \   0000CB   C3           CLR     C
   \   0000CC   E8           MOV     A,R0
   \   0000CD   9406         SUBB    A,#0x6
   \   0000CF   E9           MOV     A,R1
   \   0000D0   9400         SUBB    A,#0x0
   \   0000D2   A2D2         MOV     C,0xD0 /* PSW */.2
   \   0000D4   65D0         XRL     A,PSW
   \   0000D6   33           RLC     A
   \   0000D7   409F         JC      ??TransmitApp_MessageMSGCB_7
    699                  
    700                  buf[0 ] = 'H';
   \   0000D9   7448         MOV     A,#0x48
   \   0000DB   8E82         MOV     DPL,R6
   \   0000DD   8F83         MOV     DPH,R7
   \   0000DF   F0           MOVX    @DPTR,A
    701                  buf[1 ] = 'W';
   \   0000E0   7457         MOV     A,#0x57
   \   0000E2   A3           INC     DPTR
   \   0000E3   12....       LCALL   ?Subroutine5 & 0xFFFF
    702                  buf[5 ] = 'W';
   \                     ??CrossCallReturnLabel_7:
   \   0000E6   A3           INC     DPTR
   \   0000E7   F0           MOVX    @DPTR,A
    703                  buf[6 ] = 'D';
   \   0000E8   7444         MOV     A,#0x44
   \   0000EA   8E82         MOV     DPL,R6
   \   0000EC   8F83         MOV     DPH,R7
   \   0000EE   A3           INC     DPTR
   \   0000EF   A3           INC     DPTR
   \   0000F0   A3           INC     DPTR
   \   0000F1   A3           INC     DPTR
   \   0000F2   A3           INC     DPTR
   \   0000F3   A3           INC     DPTR
   \   0000F4   F0           MOVX    @DPTR,A
    704                  buf[10] = 'S';
   \   0000F5   7453         MOV     A,#0x53
   \   0000F7   8E82         MOV     DPL,R6
   \   0000F9   8F83         MOV     DPH,R7
   \   0000FB   A3           INC     DPTR
   \   0000FC   A3           INC     DPTR
   \   0000FD   A3           INC     DPTR
   \   0000FE   A3           INC     DPTR
   \   0000FF   A3           INC     DPTR
   \   000100   A3           INC     DPTR
   \   000101   A3           INC     DPTR
   \   000102   A3           INC     DPTR
   \   000103   A3           INC     DPTR
   \   000104   A3           INC     DPTR
   \   000105   F0           MOVX    @DPTR,A
    705                  buf[11] = 'D';
   \   000106   EE           MOV     A,R6
   \   000107   240B         ADD     A,#0xb
   \   000109   12....       LCALL   ?Subroutine10 & 0xFFFF
    706                  buf[15] = 'D';
   \                     ??CrossCallReturnLabel_16:
   \   00010C   240F         ADD     A,#0xf
   \   00010E   12....       LCALL   ?Subroutine10 & 0xFFFF
    707                  buf[16] = 'G';
   \                     ??CrossCallReturnLabel_17:
   \   000111   2410         ADD     A,#0x10
   \   000113   F582         MOV     DPL,A
   \   000115   EF           MOV     A,R7
   \   000116   12....       LCALL   ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_28:
   \   000119   7447         MOV     A,#0x47
   \   00011B   F0           MOVX    @DPTR,A
    708                  buf[20] = 'B';
   \   00011C   EE           MOV     A,R6
   \   00011D   2414         ADD     A,#0x14
   \   00011F   F582         MOV     DPL,A
   \   000121   EF           MOV     A,R7
   \   000122   12....       LCALL   ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_29:
   \   000125   7442         MOV     A,#0x42
   \   000127   F0           MOVX    @DPTR,A
    709                  buf[21] = 'J';
   \   000128   EE           MOV     A,R6
   \   000129   2415         ADD     A,#0x15
   \   00012B   F582         MOV     DPL,A
   \   00012D   EF           MOV     A,R7
   \   00012E   12....       LCALL   ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_30:
   \   000131   744A         MOV     A,#0x4a
   \   000133   F0           MOVX    @DPTR,A
    710                  buf[25] = '\n';
   \   000134   EE           MOV     A,R6
   \   000135   2419         ADD     A,#0x19
   \   000137   F582         MOV     DPL,A
   \   000139   EF           MOV     A,R7
   \   00013A   12....       LCALL   ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_31:
   \   00013D   740A         MOV     A,#0xa
   \   00013F   F0           MOVX    @DPTR,A
    711                  buf[26] = '\0';
   \   000140   EE           MOV     A,R6
   \   000141   241A         ADD     A,#0x1a
   \   000143   F582         MOV     DPL,A
   \   000145   EF           MOV     A,R7
   \   000146   12....       LCALL   ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_32:
   \   000149   E4           CLR     A
   \   00014A   F0           MOVX    @DPTR,A
    712                  
    713                  //HalLcdWriteString( (uint8*)buf, HAL_LCD_LINE_2 );
    714                  //debug_str( (uint8*)buf );
    715                  uart_sent( (uint8*)buf ,27);
   \   00014B                ; Setup parameters for call to function uart_sent
   \   00014B   791B         MOV     R1,#0x1b
   \   00014D   EE           MOV     A,R6
   \   00014E   FA           MOV     R2,A
   \   00014F   EF           MOV     A,R7
   \   000150   FB           MOV     R3,A
   \   000151   12....       LCALL   ??uart_sent?relay
    716                  /* Free mem */
    717                  osal_mem_free( buf );
   \   000154                ; Setup parameters for call to function osal_mem_free
   \   000154   EE           MOV     A,R6
   \   000155   FA           MOV     R2,A
   \   000156   EF           MOV     A,R7
   \   000157   FB           MOV     R3,A
   \   000158   12....       LCALL   ??osal_mem_free?relay
    718                }
    719          //----------------------------
    720                break;
    721          
    722              // Could receive control messages in the future.
    723              default:
    724                break;
    725            }
    726          }
   \                     ??TransmitApp_MessageMSGCB_1:
   \   00015B   02....       LJMP    ?Subroutine0 & 0xFFFF
   \   00015E                REQUIRE _A_P1
   \   00015E                REQUIRE P1DIR

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine13:
   \   000000   75F00A       MOV     B,#0xa
   \   000003   84           DIV     AB
   \   000004   E5F0         MOV     A,B
   \   000006   12....       LCALL   ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_25:
   \   000009   A3           INC     DPTR
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine15:
   \   000000   2430         ADD     A,#0x30
   \   000002   8A82         MOV     DPL,R2
   \   000004   8B83         MOV     DPH,R3
   \   000006   A3           INC     DPTR
   \   000007   A3           INC     DPTR
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine10:
   \   000000   F582         MOV     DPL,A
   \   000002   EF           MOV     A,R7
   \   000003   3400         ADDC    A,#0x0
   \   000005   F583         MOV     DPH,A
   \   000007   7444         MOV     A,#0x44
   \   000009   F0           MOVX    @DPTR,A
   \   00000A   EE           MOV     A,R6
   \   00000B   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine7:
   \   000000   8C82         MOV     DPL,R4
   \   000002   8D83         MOV     DPH,R5
   \   000004   E0           MOVX    A,@DPTR
   \   000005   28           ADD     A,R0
   \   000006   F5..         MOV     ?V0 + 2,A
   \   000008   A3           INC     DPTR
   \   000009   E0           MOVX    A,@DPTR
   \   00000A   39           ADDC    A,R1
   \   00000B   85..82       MOV     DPL,?V0 + 2
   \   00000E   F583         MOV     DPH,A
   \   000010   E0           MOVX    A,@DPTR
   \   000011   84           DIV     AB
   \   000012   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine6:
   \   000000   EA           MOV     A,R2
   \   000001   2421         ADD     A,#0x21
   \   000003   F582         MOV     DPL,A
   \   000005   EB           MOV     A,R3
   \   000006   3400         ADDC    A,#0x0
   \   000008   F583         MOV     DPH,A
   \   00000A   12....       LCALL   ?Subroutine14 & 0xFFFF
   \                     ??CrossCallReturnLabel_23:
   \   00000D   A3           INC     DPTR
   \   00000E   E0           MOVX    A,@DPTR
   \   00000F   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine14:
   \   000000   A3           INC     DPTR
   \   000001   E0           MOVX    A,@DPTR
   \   000002   F583         MOV     DPH,A
   \   000004   8882         MOV     DPL,R0
   \   000006   A3           INC     DPTR
   \   000007   A3           INC     DPTR
   \   000008   A3           INC     DPTR
   \   000009   A3           INC     DPTR
   \   00000A   22           RET
    727          
    728          /*********************************************************************
    729           * @fn      TransmitApp_SendTheMessage
    730           *
    731           * @brief   Send "the" message.
    732           *
    733           * @param   none
    734           *
    735           * @return  none
    736           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    737          void TransmitApp_SendTheMessage( void )
   \                     TransmitApp_SendTheMessage:
    738          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
    739            uint16 len;
    740            uint8 tmp;
    741          
    742          
    743            do {
    744          //    // put the sequence number in the message
    745          //    tmp = HI_UINT8( TransmitApp_TransID );
    746          //    tmp += (tmp <= 9) ? ('0') : ('A' - 0x0A);
    747          //    TransmitApp_Msg[2] = tmp;
    748          //    tmp = LO_UINT8( TransmitApp_TransID );
    749          //    tmp += (tmp <= 9) ? ('0') : ('A' - 0x0A);
    750          //    TransmitApp_Msg[3] = tmp;
    751          //  
    752          //    len = TransmitApp_MaxDataLength;
    753          //  
    754          //#if defined ( TRANSMITAPP_RANDOM_LEN )
    755          //    len = (uint8)(osal_rand() & 0x7F);
    756          //    if( len > TransmitApp_MaxDataLength || len == 0 )
    757          //      len = TransmitApp_MaxDataLength;
    758          //    else if ( len < 4 )
    759          //      len = 4;
    760          //#endif
    761          //
    762              //ÈËÌå P1.3   ---pan
    763              P1DIR &= ~ 0x08;
   \                     ??TransmitApp_SendTheMessage_0:
   \   000005   53FEF7       ANL     0xfe,#0xf7
    764              if(P1_3)
   \   000008   A293         MOV     C,0x90.3
   \   00000A   5004         JNC     ??TransmitApp_SendTheMessage_1
    765              {
    766                TransmitApp_Msg[0] = 1;
   \   00000C   7401         MOV     A,#0x1
   \   00000E   8001         SJMP    ??TransmitApp_SendTheMessage_2
    767              }
    768              else
    769              {TransmitApp_Msg[0] = 0;
   \                     ??TransmitApp_SendTheMessage_1:
   \   000010   E4           CLR     A
   \                     ??TransmitApp_SendTheMessage_2:
   \   000011   90....       MOV     DPTR,#TransmitApp_Msg
   \   000014   F0           MOVX    @DPTR,A
    770              }
    771              
    772                //ÎÂ¶È
    773                TransmitApp_Msg[1] = 20;
   \   000015   7414         MOV     A,#0x14
   \   000017   90....       MOV     DPTR,#(TransmitApp_Msg + 1)
   \   00001A   F0           MOVX    @DPTR,A
    774          
    775               //Êª¶È
    776                TransmitApp_Msg[2] = 35;
   \   00001B   7423         MOV     A,#0x23
   \   00001D   90....       MOV     DPTR,#(TransmitApp_Msg + 2)
   \   000020   F0           MOVX    @DPTR,A
    777                
    778                //¿ÉÈ¼
    779                TransmitApp_Msg[3] = 10;
   \   000021   740A         MOV     A,#0xa
   \   000023   90....       MOV     DPTR,#(TransmitApp_Msg + 3)
   \   000026   F0           MOVX    @DPTR,A
    780                
    781                //µÆ¹â
    782                P0DIR &= ~ 0x40;
   \   000027   53FDBF       ANL     0xfd,#0xbf
    783                if(light)
   \   00002A   90....       MOV     DPTR,#light
   \   00002D   E0           MOVX    A,@DPTR
   \   00002E   6004         JZ      ??TransmitApp_SendTheMessage_3
    784                {TransmitApp_Msg[4] = 100;   
   \   000030   7464         MOV     A,#0x64
   \   000032   8001         SJMP    ??TransmitApp_SendTheMessage_4
    785                }
    786                else
    787                {
    788                  TransmitApp_Msg[4] = 0;
   \                     ??TransmitApp_SendTheMessage_3:
   \   000034   E4           CLR     A
   \                     ??TransmitApp_SendTheMessage_4:
   \   000035   90....       MOV     DPTR,#(TransmitApp_Msg + 4)
   \   000038   F0           MOVX    @DPTR,A
    789                }
    790                
    791                //±¨¾¯
    792                if(alarm)
   \   000039   90....       MOV     DPTR,#alarm
   \   00003C   E0           MOVX    A,@DPTR
   \   00003D   6004         JZ      ??TransmitApp_SendTheMessage_5
    793                {TransmitApp_Msg[5] = 1;   
   \   00003F   7401         MOV     A,#0x1
   \   000041   8001         SJMP    ??TransmitApp_SendTheMessage_6
    794                }
    795                else
    796                {
    797                  TransmitApp_Msg[5] = 0;
   \                     ??TransmitApp_SendTheMessage_5:
   \   000043   E4           CLR     A
   \                     ??TransmitApp_SendTheMessage_6:
   \   000044   90....       MOV     DPTR,#(TransmitApp_Msg + 5)
   \   000047   F0           MOVX    @DPTR,A
    798                }      
    799                
    800                len =6;
    801              
    802              tmp = AF_DataRequest( &TransmitApp_DstAddr, &TransmitApp_epDesc,
    803                                     TRANSMITAPP_CLUSTERID_TESTMSG,
    804                                     len, TransmitApp_Msg,
    805                                    &TransmitApp_TransID,
    806                                     TRANSMITAPP_TX_OPTIONS,
    807                                     AF_DEFAULT_RADIUS );
   \   000048                ; Setup parameters for call to function AF_DataRequest
   \   000048   75..1E       MOV     ?V0 + 0,#0x1e
   \   00004B   78..         MOV     R0,#?V0 + 0
   \   00004D   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000050   75....       MOV     ?V0 + 0,#(TransmitApp_TransID & 0xff)
   \   000053   75....       MOV     ?V0 + 1,#((TransmitApp_TransID >> 8) & 0xff)
   \   000056   78..         MOV     R0,#?V0 + 0
   \   000058   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00005B   75....       MOV     ?V0 + 0,#(TransmitApp_Msg & 0xff)
   \   00005E   75....       MOV     ?V0 + 1,#((TransmitApp_Msg >> 8) & 0xff)
   \   000061   78..         MOV     R0,#?V0 + 0
   \   000063   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000066   75..06       MOV     ?V0 + 0,#0x6
   \   000069   75..00       MOV     ?V0 + 1,#0x0
   \   00006C   78..         MOV     R0,#?V0 + 0
   \   00006E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000071   75..01       MOV     ?V0 + 0,#0x1
   \   000074   78..         MOV     R0,#?V0 + 0
   \   000076   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000079   7920         MOV     R1,#0x20
   \   00007B   7C..         MOV     R4,#(TransmitApp_epDesc & 0xff)
   \   00007D   7D..         MOV     R5,#((TransmitApp_epDesc >> 8) & 0xff)
   \   00007F   7A..         MOV     R2,#(TransmitApp_DstAddr & 0xff)
   \   000081   7B..         MOV     R3,#((TransmitApp_DstAddr >> 8) & 0xff)
   \   000083   12....       LCALL   ??AF_DataRequest?relay
   \   000086   7409         MOV     A,#0x9
   \   000088   12....       LCALL   ?DEALLOC_XSTACK8
   \   00008B   E9           MOV     A,R1
   \   00008C   FA           MOV     R2,A
    808              
    809             //uart_sent("sent AF_DataRequest --- ",0);
    810              
    811          //#if defined ( TRANSMITAPP_RANDOM_LEN )
    812          //    if ( tmp == afStatus_SUCCESS )
    813          //    {
    814          //      txAccum += len;
    815          //    }
    816          //#endif
    817          //
    818              if ( timesToSend )
   \   00008D   90....       MOV     DPTR,#timesToSend
   \   000090   E0           MOVX    A,@DPTR
   \   000091   600A         JZ      ??TransmitApp_SendTheMessage_7
    819              {
    820                timesToSend--;
    821              }
    822            } while ( (timesToSend != 0) && (afStatus_SUCCESS == tmp) );
   \   000093   14           DEC     A
   \   000094   F0           MOVX    @DPTR,A
   \   000095   6006         JZ      ??TransmitApp_SendTheMessage_7
   \   000097   EA           MOV     A,R2
   \   000098   7003         JNZ     $+5
   \   00009A   02....       LJMP    ??TransmitApp_SendTheMessage_0 & 0xFFFF
    823          
    824            if ( afStatus_SUCCESS == tmp )
   \                     ??TransmitApp_SendTheMessage_7:
   \   00009D   EA           MOV     A,R2
   \   00009E   7017         JNZ     ??TransmitApp_SendTheMessage_8
    825            {
    826              pktCounter++;
   \   0000A0   90....       MOV     DPTR,#pktCounter
   \   0000A3   E0           MOVX    A,@DPTR
   \   0000A4   2401         ADD     A,#0x1
   \   0000A6   F0           MOVX    @DPTR,A
   \   0000A7   A3           INC     DPTR
   \   0000A8   E0           MOVX    A,@DPTR
   \   0000A9   3400         ADDC    A,#0x0
   \   0000AB   F0           MOVX    @DPTR,A
    827              uart_sent("Sucess !\n",0);
   \   0000AC                ; Setup parameters for call to function uart_sent
   \   0000AC   7900         MOV     R1,#0x0
   \   0000AE   7A..         MOV     R2,#(`?<Constant "Sucess !\\n">` & 0xff)
   \   0000B0   7B..         MOV     R3,#((`?<Constant "Sucess !\\n">` >> 8) & 0xff)
   \   0000B2   12....       LCALL   ??uart_sent?relay
   \   0000B5   8019         SJMP    ??TransmitApp_SendTheMessage_9
    828            }
    829            else
    830            { uart_sent("sent Error, so wait (10 mSec) and try again.\n",0);
   \                     ??TransmitApp_SendTheMessage_8:
   \   0000B7                ; Setup parameters for call to function uart_sent
   \   0000B7   7900         MOV     R1,#0x0
   \   0000B9   7A..         MOV     R2,#(`?<Constant "sent Error, so wait (...">` & 0xff)
   \   0000BB   7B..         MOV     R3,#((`?<Constant "sent Error, so wait (...">` >> 8) & 0xff)
   \   0000BD   12....       LCALL   ??uart_sent?relay
    831              // Error, so wait (10 mSec) and try again.
    832              osal_start_timerEx( TransmitApp_TaskID, TRANSMITAPP_SEND_ERR_EVT, 500 );
   \   0000C0                ; Setup parameters for call to function osal_start_timerEx
   \   0000C0   7CF4         MOV     R4,#-0xc
   \   0000C2   7D01         MOV     R5,#0x1
   \   0000C4   7A04         MOV     R2,#0x4
   \   0000C6   7B00         MOV     R3,#0x0
   \   0000C8   90....       MOV     DPTR,#TransmitApp_TaskID
   \   0000CB   E0           MOVX    A,@DPTR
   \   0000CC   F9           MOV     R1,A
   \   0000CD   12....       LCALL   ??osal_start_timerEx?relay
    833            }
    834          }
   \                     ??TransmitApp_SendTheMessage_9:
   \   0000D0   02....       LJMP    ?Subroutine1 & 0xFFFF
   \   0000D3                REQUIRE _A_P1
   \   0000D3                REQUIRE P0DIR
   \   0000D3                REQUIRE P1DIR
    835          
    836          /*********************************************************************
    837           * @fn      TransmitApp_ChangeState
    838           *
    839           * @brief   Toggle the Sending/Waiting state flag
    840           *
    841           * @param   none
    842           *
    843           * @return  none
    844           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    845          void TransmitApp_ChangeState( void )
   \                     TransmitApp_ChangeState:
    846          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    847            if ( TransmitApp_State == TRANSMITAPP_STATE_WAITING )
   \   000004   90....       MOV     DPTR,#TransmitApp_State
   \   000007   E0           MOVX    A,@DPTR
   \   000008   700D         JNZ     ??TransmitApp_ChangeState_0
    848            {
    849              TransmitApp_State = TRANSMITAPP_STATE_SENDING;
   \   00000A   7401         MOV     A,#0x1
   \   00000C   F0           MOVX    @DPTR,A
    850              TransmitApp_SetSendEvt();
   \   00000D                ; Setup parameters for call to function TransmitApp_SetSendEvt
   \   00000D   12....       LCALL   ??TransmitApp_SetSendEvt?relay
    851              timesToSend = TRANSMITAPP_INITIAL_MSG_COUNT;
   \   000010   7402         MOV     A,#0x2
   \   000012   90....       MOV     DPTR,#timesToSend
   \   000015   8001         SJMP    ??TransmitApp_ChangeState_1
    852            }
    853            else
    854            {
    855              TransmitApp_State = TRANSMITAPP_STATE_WAITING;
   \                     ??TransmitApp_ChangeState_0:
   \   000017   E4           CLR     A
   \                     ??TransmitApp_ChangeState_1:
   \   000018   F0           MOVX    @DPTR,A
    856            }
    857          }
   \   000019                REQUIRE ?Subroutine2
   \   000019                ; // Fall through to label ?Subroutine2

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   D083         POP     DPH
   \   000002   D082         POP     DPL
   \   000004   02....       LJMP    ?BRET
    858          
    859          /*********************************************************************
    860           * @fn      TransmitApp_SetSendEvt
    861           *
    862           * @brief   Set the event flag
    863           *
    864           * @param   none
    865           *
    866           * @return  none
    867           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    868          void TransmitApp_SetSendEvt( void )
   \                     TransmitApp_SetSendEvt:
    869          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    870          #if defined( TRANSMITAPP_DELAY_SEND )
    871            // Adds a delay to sending the data
    872            osal_start_timerEx( TransmitApp_TaskID,
    873                              TRANSMITAPP_SEND_MSG_EVT, TRANSMITAPP_SEND_DELAY );
    874          #else
    875            // No Delay - just send the data
    876            osal_set_event( TransmitApp_TaskID, TRANSMITAPP_SEND_MSG_EVT );
   \   000004                ; Setup parameters for call to function osal_set_event
   \   000004   7A01         MOV     R2,#0x1
   \   000006   7B00         MOV     R3,#0x0
   \   000008   90....       MOV     DPTR,#TransmitApp_TaskID
   \   00000B   E0           MOVX    A,@DPTR
   \   00000C   F9           MOV     R1,A
   \   00000D   12....       LCALL   ??osal_set_event?relay
    877          #endif
    878          }
   \   000010   80..         SJMP    ?Subroutine2
    879          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    880          void uart_sent( uint8 * msg ,uint8 len)
   \                     uart_sent:
    881          {   
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
   \   000009   89..         MOV     ?V0 + 0,R1
    882              if (len == 0)
   \   00000B   E9           MOV     A,R1
   \   00000C   7006         JNZ     ??uart_sent_0
    883              {len = (uint8)osal_strlen( (char*)msg );
   \   00000E                ; Setup parameters for call to function osal_strlen
   \   00000E   12....       LCALL   ??osal_strlen?relay
   \   000011   EA           MOV     A,R2
   \   000012   F5..         MOV     ?V0 + 0,A
    884              }
    885              
    886          //    uint8 *buf;
    887          //    buf = osal_mem_alloc( len );
    888          //    if(buf)
    889          //    {
    890          //      buf = osal_mem_alloc( len );
    891          //      osal_memcpy( buf, msg , len );
    892          //      HalUARTWrite(ZTOOL_PORT, buf, len);
    893          //      /* Free mem */
    894          //      osal_mem_free( buf );
    895          //    }
    896              HalUARTWrite(ZTOOL_PORT, msg, len);
   \                     ??uart_sent_0:
   \   000014                ; Setup parameters for call to function HalUARTWrite
   \   000014   AC..         MOV     R4,?V0 + 0
   \   000016   7D00         MOV     R5,#0x0
   \   000018   EE           MOV     A,R6
   \   000019   FA           MOV     R2,A
   \   00001A   EF           MOV     A,R7
   \   00001B   FB           MOV     R3,A
   \   00001C   7900         MOV     R1,#0x0
   \   00001E   12....       LCALL   ??HalUARTWrite?relay
    897          }
   \   000021   02....       LJMP    ?Subroutine1 & 0xFFFF
    898          
    899          /*********************************************************************
    900           * @fn      TransmitApp_DisplayResults
    901           *
    902           * @brief   Display the results and clear the accumulators
    903           *
    904           * @param   none
    905           *
    906           * @return  none
    907           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine11:
   \   000000   E582         MOV     A,DPL
   \   000002   25..         ADD     A,?V0 + 0
   \   000004   F582         MOV     DPL,A
   \   000006   E583         MOV     A,DPH
   \   000008                REQUIRE ??Subroutine16_0
   \   000008                ; // Fall through to label ??Subroutine16_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    908          void TransmitApp_DisplayResults( void )
   \                     TransmitApp_DisplayResults:
    909          {
   \   000000   74E8         MOV     A,#-0x18
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 24
   \   000005                ; Auto size: 21
   \   000005   74EB         MOV     A,#-0x15
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    910          #ifdef LCD_SUPPORTED
    911            #define LCD_W  16
    912            uint32 rxShdw, txShdw, tmp;
    913            byte lcd_buf[LCD_W+1];
    914            byte idx;
    915          #endif
    916            // The OSAL timers are not real-time, so calculate the actual time expired.
    917            uint32 msecs = osal_GetSystemClock() - clkShdw;
   \   00000A                ; Setup parameters for call to function osal_GetSystemClock
   \   00000A   12....       LCALL   ?Subroutine12 & 0xFFFF
   \                     ??CrossCallReturnLabel_18:
   \   00000D   12....       LCALL   ?L_SUB_X
   \   000010   85..82       MOV     DPL,?XSP + 0
   \   000013   85..83       MOV     DPH,?XSP + 1
   \   000016   78..         MOV     R0,#?V0 + 0
   \   000018   12....       LCALL   ?L_MOV_TO_X
    918            clkShdw = osal_GetSystemClock();
   \   00001B                ; Setup parameters for call to function osal_GetSystemClock
   \   00001B   12....       LCALL   ?Subroutine12 & 0xFFFF
   \                     ??CrossCallReturnLabel_19:
   \   00001E   12....       LCALL   ?L_MOV_TO_X
    919          
    920            rxTotal += rxAccum;
   \   000021   90....       MOV     DPTR,#rxAccum
   \   000024   78..         MOV     R0,#?V0 + 0
   \   000026   12....       LCALL   ?L_MOV_X
   \   000029   90....       MOV     DPTR,#rxTotal
   \   00002C   78..         MOV     R0,#?V0 + 0
   \   00002E   12....       LCALL   ?L_ADD_TO_X
    921            txTotal += txAccum;
   \   000031   90....       MOV     DPTR,#txAccum
   \   000034   78..         MOV     R0,#?V0 + 0
   \   000036   12....       LCALL   ?L_MOV_X
   \   000039   90....       MOV     DPTR,#txTotal
   \   00003C   78..         MOV     R0,#?V0 + 0
   \   00003E   12....       LCALL   ?L_ADD_TO_X
    922          
    923          #if defined ( LCD_SUPPORTED )
    924            rxShdw = (rxAccum * 1000 + msecs/2) / msecs;
   \   000041   85..82       MOV     DPL,?XSP + 0
   \   000044   85..83       MOV     DPH,?XSP + 1
   \   000047   78..         MOV     R0,#?V0 + 8
   \   000049   12....       LCALL   ?L_MOV_X
   \   00004C   7401         MOV     A,#0x1
   \   00004E   78..         MOV     R0,#?V0 + 8
   \   000050   12....       LCALL   ?UL_SHR
   \   000053   90....       MOV     DPTR,#rxAccum
   \   000056   78..         MOV     R0,#?V0 + 0
   \   000058   12....       LCALL   ?L_MOV_X
   \   00005B   90....       MOV     DPTR,#__Constant_3e8
   \   00005E   78..         MOV     R0,#?V0 + 4
   \   000060   12....       LCALL   ?L_MOV_X
   \   000063   78..         MOV     R0,#?V0 + 0
   \   000065   79..         MOV     R1,#?V0 + 4
   \   000067   12....       LCALL   ?L_MUL
   \   00006A   78..         MOV     R0,#?V0 + 0
   \   00006C   79..         MOV     R1,#?V0 + 8
   \   00006E   12....       LCALL   ?L_ADD
   \   000071   85..82       MOV     DPL,?XSP + 0
   \   000074   85..83       MOV     DPH,?XSP + 1
   \   000077   78..         MOV     R0,#?V0 + 4
   \   000079   12....       LCALL   ?L_MOV_X
   \   00007C   78..         MOV     R0,#?V0 + 0
   \   00007E   79..         MOV     R1,#?V0 + 4
   \   000080   12....       LCALL   ?UL_DIV_MOD
    925            txShdw = (txAccum * 1000 + msecs/2) / msecs;
   \   000083   90....       MOV     DPTR,#txAccum
   \   000086   78..         MOV     R0,#?V0 + 4
   \   000088   12....       LCALL   ?L_MOV_X
   \   00008B   90....       MOV     DPTR,#__Constant_3e8
   \   00008E   78..         MOV     R0,#?V0 + 12
   \   000090   12....       LCALL   ?L_MOV_X
   \   000093   78..         MOV     R0,#?V0 + 4
   \   000095   79..         MOV     R1,#?V0 + 12
   \   000097   12....       LCALL   ?L_MUL
   \   00009A   78..         MOV     R0,#?V0 + 4
   \   00009C   79..         MOV     R1,#?V0 + 8
   \   00009E   12....       LCALL   ?L_ADD
   \   0000A1   85..82       MOV     DPL,?XSP + 0
   \   0000A4   85..83       MOV     DPH,?XSP + 1
   \   0000A7   78..         MOV     R0,#?V0 + 8
   \   0000A9   12....       LCALL   ?L_MOV_X
   \   0000AC   78..         MOV     R0,#?V0 + 4
   \   0000AE   79..         MOV     R1,#?V0 + 8
   \   0000B0   12....       LCALL   ?UL_DIV_MOD
    926          
    927            osal_memset( lcd_buf, ' ', LCD_W );
   \   0000B3                ; Setup parameters for call to function osal_memset
   \   0000B3   7C10         MOV     R4,#0x10
   \   0000B5   7D00         MOV     R5,#0x0
   \   0000B7   7920         MOV     R1,#0x20
   \   0000B9   7404         MOV     A,#0x4
   \   0000BB   12....       LCALL   ?XSTACK_DISP0_8
   \   0000BE   AA82         MOV     R2,DPL
   \   0000C0   AB83         MOV     R3,DPH
   \   0000C2   12....       LCALL   ??osal_memset?relay
    928            lcd_buf[LCD_W] = NULL;
   \   0000C5   7414         MOV     A,#0x14
   \   0000C7   12....       LCALL   ?XSTACK_DISP0_8
   \   0000CA   E4           CLR     A
   \   0000CB   F0           MOVX    @DPTR,A
    929          
    930            idx = 4;
   \   0000CC   7A04         MOV     R2,#0x4
    931            tmp = (rxShdw >= 100000) ? 99999 : rxShdw;
   \   0000CE   90....       MOV     DPTR,#__Constant_186a0
   \   0000D1   78..         MOV     R0,#?V0 + 8
   \   0000D3   12....       LCALL   ?L_MOV_X
   \   0000D6   78..         MOV     R0,#?V0 + 8
   \   0000D8   79..         MOV     R1,#?V0 + 0
   \   0000DA   12....       LCALL   ?UL_GT
   \   0000DD   400A         JC      ??TransmitApp_DisplayResults_0
   \   0000DF   90....       MOV     DPTR,#__Constant_1869f
   \   0000E2   78..         MOV     R0,#?V0 + 8
   \   0000E4   12....       LCALL   ?L_MOV_X
   \   0000E7   800C         SJMP    ??TransmitApp_DisplayResults_1
   \                     ??TransmitApp_DisplayResults_0:
   \   0000E9   85....       MOV     ?V0 + 8,?V0 + 0
   \   0000EC   85....       MOV     ?V0 + 9,?V0 + 1
   \   0000EF   85....       MOV     ?V0 + 10,?V0 + 2
   \   0000F2   85....       MOV     ?V0 + 11,?V0 + 3
    932            do
    933            {
    934              lcd_buf[idx--] = (uint8) ('0' + (tmp % 10));
   \                     ??TransmitApp_DisplayResults_1:
   \   0000F5   85....       MOV     ?V0 + 0,?V0 + 8
   \   0000F8   85....       MOV     ?V0 + 1,?V0 + 9
   \   0000FB   85....       MOV     ?V0 + 2,?V0 + 10
   \   0000FE   85....       MOV     ?V0 + 3,?V0 + 11
   \   000101   90....       MOV     DPTR,#__Constant_a
   \   000104   78..         MOV     R0,#?V0 + 12
   \   000106   12....       LCALL   ?L_MOV_X
   \   000109   78..         MOV     R0,#?V0 + 0
   \   00010B   79..         MOV     R1,#?V0 + 12
   \   00010D   12....       LCALL   ?UL_DIV_MOD
   \   000110   E5..         MOV     A,?V0 + 12
   \   000112   2430         ADD     A,#0x30
   \   000114   C0E0         PUSH    A
   \   000116   8A..         MOV     ?V0 + 0,R2
   \   000118   7404         MOV     A,#0x4
   \   00011A   12....       LCALL   ?XSTACK_DISP0_8
   \   00011D   12....       LCALL   ?Subroutine11 & 0xFFFF
    935              tmp /= 10;
    936            } while ( tmp );
   \                     ??CrossCallReturnLabel_33:
   \   000120   D0E0         POP     A
   \   000122   12....       LCALL   ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_0:
   \   000125   12....       LCALL   ?L_MOV_X
   \   000128   78..         MOV     R0,#?V0 + 8
   \   00012A   79..         MOV     R1,#?V0 + 0
   \   00012C   12....       LCALL   ?UL_DIV_MOD
   \   00012F   90....       MOV     DPTR,#__Constant_0
   \   000132   78..         MOV     R0,#?V0 + 8
   \   000134   12....       LCALL   ?L_EQ_X
   \   000137   70BC         JNZ     ??TransmitApp_DisplayResults_1
    937          
    938            idx = LCD_W-1;
   \   000139   7A0F         MOV     R2,#0xf
    939            tmp = rxTotal;
   \   00013B   90....       MOV     DPTR,#rxTotal
   \   00013E   78..         MOV     R0,#?V0 + 8
   \   000140   12....       LCALL   ?L_MOV_X
    940            do
    941            {
    942              lcd_buf[idx--] = (uint8) ('0' + (tmp % 10));
   \                     ??TransmitApp_DisplayResults_2:
   \   000143   85....       MOV     ?V0 + 0,?V0 + 8
   \   000146   85....       MOV     ?V0 + 1,?V0 + 9
   \   000149   85....       MOV     ?V0 + 2,?V0 + 10
   \   00014C   85....       MOV     ?V0 + 3,?V0 + 11
   \   00014F   90....       MOV     DPTR,#__Constant_a
   \   000152   78..         MOV     R0,#?V0 + 12
   \   000154   12....       LCALL   ?L_MOV_X
   \   000157   78..         MOV     R0,#?V0 + 0
   \   000159   79..         MOV     R1,#?V0 + 12
   \   00015B   12....       LCALL   ?UL_DIV_MOD
   \   00015E   E5..         MOV     A,?V0 + 12
   \   000160   2430         ADD     A,#0x30
   \   000162   C0E0         PUSH    A
   \   000164   8A..         MOV     ?V0 + 0,R2
   \   000166   7404         MOV     A,#0x4
   \   000168   12....       LCALL   ?XSTACK_DISP0_8
   \   00016B   12....       LCALL   ?Subroutine11 & 0xFFFF
    943              tmp /= 10;
    944            } while ( tmp );
   \                     ??CrossCallReturnLabel_34:
   \   00016E   D0E0         POP     A
   \   000170   12....       LCALL   ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_1:
   \   000173   12....       LCALL   ?L_MOV_X
   \   000176   78..         MOV     R0,#?V0 + 8
   \   000178   79..         MOV     R1,#?V0 + 0
   \   00017A   12....       LCALL   ?UL_DIV_MOD
   \   00017D   90....       MOV     DPTR,#__Constant_0
   \   000180   78..         MOV     R0,#?V0 + 8
   \   000182   12....       LCALL   ?L_EQ_X
   \   000185   70BC         JNZ     ??TransmitApp_DisplayResults_2
    945          
    946            HalLcdWriteString( (char*)lcd_buf, HAL_LCD_LINE_1 );
   \   000187                ; Setup parameters for call to function HalLcdWriteString
   \   000187   7901         MOV     R1,#0x1
   \   000189   7404         MOV     A,#0x4
   \   00018B   12....       LCALL   ?XSTACK_DISP0_8
   \   00018E   AA82         MOV     R2,DPL
   \   000190   AB83         MOV     R3,DPH
   \   000192   12....       LCALL   ??HalLcdWriteString?relay
    947            osal_memset( lcd_buf, ' ', LCD_W );
   \   000195                ; Setup parameters for call to function osal_memset
   \   000195   7C10         MOV     R4,#0x10
   \   000197   7D00         MOV     R5,#0x0
   \   000199   7920         MOV     R1,#0x20
   \   00019B   7404         MOV     A,#0x4
   \   00019D   12....       LCALL   ?XSTACK_DISP0_8
   \   0001A0   AA82         MOV     R2,DPL
   \   0001A2   AB83         MOV     R3,DPH
   \   0001A4   12....       LCALL   ??osal_memset?relay
    948          
    949            idx = 4;
   \   0001A7   7A04         MOV     R2,#0x4
    950            tmp = (txShdw >= 100000) ? 99999 : txShdw;
   \   0001A9   90....       MOV     DPTR,#__Constant_186a0
   \   0001AC   78..         MOV     R0,#?V0 + 0
   \   0001AE   12....       LCALL   ?L_MOV_X
   \   0001B1   78..         MOV     R0,#?V0 + 0
   \   0001B3   79..         MOV     R1,#?V0 + 4
   \   0001B5   12....       LCALL   ?UL_GT
   \   0001B8   400A         JC      ??TransmitApp_DisplayResults_3
   \   0001BA   90....       MOV     DPTR,#__Constant_1869f
   \   0001BD   78..         MOV     R0,#?V0 + 8
   \   0001BF   12....       LCALL   ?L_MOV_X
   \   0001C2   800C         SJMP    ??TransmitApp_DisplayResults_4
   \                     ??TransmitApp_DisplayResults_3:
   \   0001C4   85....       MOV     ?V0 + 8,?V0 + 4
   \   0001C7   85....       MOV     ?V0 + 9,?V0 + 5
   \   0001CA   85....       MOV     ?V0 + 10,?V0 + 6
   \   0001CD   85....       MOV     ?V0 + 11,?V0 + 7
    951            do
    952            {
    953              lcd_buf[idx--] = (uint8) ('0' + (tmp % 10));
   \                     ??TransmitApp_DisplayResults_4:
   \   0001D0   85....       MOV     ?V0 + 4,?V0 + 8
   \   0001D3   85....       MOV     ?V0 + 5,?V0 + 9
   \   0001D6   85....       MOV     ?V0 + 6,?V0 + 10
   \   0001D9   85....       MOV     ?V0 + 7,?V0 + 11
   \   0001DC   90....       MOV     DPTR,#__Constant_a
   \   0001DF   78..         MOV     R0,#?V0 + 0
   \   0001E1   12....       LCALL   ?L_MOV_X
   \   0001E4   78..         MOV     R0,#?V0 + 4
   \   0001E6   79..         MOV     R1,#?V0 + 0
   \   0001E8   12....       LCALL   ?UL_DIV_MOD
   \   0001EB   E5..         MOV     A,?V0 + 0
   \   0001ED   2430         ADD     A,#0x30
   \   0001EF   C0E0         PUSH    A
   \   0001F1   8A..         MOV     ?V0 + 0,R2
   \   0001F3   7404         MOV     A,#0x4
   \   0001F5   12....       LCALL   ?XSTACK_DISP0_8
   \   0001F8   12....       LCALL   ?Subroutine11 & 0xFFFF
    954              tmp /= 10;
    955            } while ( tmp );
   \                     ??CrossCallReturnLabel_35:
   \   0001FB   D0E0         POP     A
   \   0001FD   12....       LCALL   ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_2:
   \   000200   12....       LCALL   ?L_MOV_X
   \   000203   78..         MOV     R0,#?V0 + 8
   \   000205   79..         MOV     R1,#?V0 + 0
   \   000207   12....       LCALL   ?UL_DIV_MOD
   \   00020A   90....       MOV     DPTR,#__Constant_0
   \   00020D   78..         MOV     R0,#?V0 + 8
   \   00020F   12....       LCALL   ?L_EQ_X
   \   000212   70BC         JNZ     ??TransmitApp_DisplayResults_4
    956          
    957            idx = LCD_W-1;
   \   000214   7A0F         MOV     R2,#0xf
    958            tmp = txTotal;
   \   000216   90....       MOV     DPTR,#txTotal
   \   000219   78..         MOV     R0,#?V0 + 8
   \   00021B   12....       LCALL   ?L_MOV_X
    959            do
    960            {
    961              lcd_buf[idx--] = (uint8) ('0' + (tmp % 10));
   \                     ??TransmitApp_DisplayResults_5:
   \   00021E   85....       MOV     ?V0 + 4,?V0 + 8
   \   000221   85....       MOV     ?V0 + 5,?V0 + 9
   \   000224   85....       MOV     ?V0 + 6,?V0 + 10
   \   000227   85....       MOV     ?V0 + 7,?V0 + 11
   \   00022A   90....       MOV     DPTR,#__Constant_a
   \   00022D   78..         MOV     R0,#?V0 + 0
   \   00022F   12....       LCALL   ?L_MOV_X
   \   000232   78..         MOV     R0,#?V0 + 4
   \   000234   79..         MOV     R1,#?V0 + 0
   \   000236   12....       LCALL   ?UL_DIV_MOD
   \   000239   E5..         MOV     A,?V0 + 0
   \   00023B   2430         ADD     A,#0x30
   \   00023D   C0E0         PUSH    A
   \   00023F   8A..         MOV     ?V0 + 0,R2
   \   000241   7404         MOV     A,#0x4
   \   000243   12....       LCALL   ?XSTACK_DISP0_8
   \   000246   12....       LCALL   ?Subroutine11 & 0xFFFF
    962              tmp /= 10;
    963            } while ( tmp );
   \                     ??CrossCallReturnLabel_36:
   \   000249   D0E0         POP     A
   \   00024B   12....       LCALL   ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_3:
   \   00024E   12....       LCALL   ?L_MOV_X
   \   000251   78..         MOV     R0,#?V0 + 8
   \   000253   79..         MOV     R1,#?V0 + 0
   \   000255   12....       LCALL   ?UL_DIV_MOD
   \   000258   90....       MOV     DPTR,#__Constant_0
   \   00025B   78..         MOV     R0,#?V0 + 8
   \   00025D   12....       LCALL   ?L_EQ_X
   \   000260   70BC         JNZ     ??TransmitApp_DisplayResults_5
    964          
    965            HalLcdWriteString( (char*)lcd_buf, HAL_LCD_LINE_2 );
   \   000262                ; Setup parameters for call to function HalLcdWriteString
   \   000262   7902         MOV     R1,#0x2
   \   000264   7404         MOV     A,#0x4
   \   000266   12....       LCALL   ?XSTACK_DISP0_8
   \   000269   AA82         MOV     R2,DPL
   \   00026B   AB83         MOV     R3,DPH
   \   00026D   12....       LCALL   ??HalLcdWriteString?relay
    966          #else
    967            DEBUG_INFO( COMPID_APP, SEVERITY_INFORMATION, 3, rxAccum,
    968                                                        (uint16)msecs, (uint16)rxTotal );
    969          #endif
    970          
    971            if ( (rxAccum == 0) && (txAccum == 0) )
    972            {
    973              //osal_stop_timerEx( TransmitApp_TaskID, TRANSMITAPP_RCVTIMER_EVT );
    974              //timerOn = FALSE;
    975            }
    976          
    977            rxAccum = txAccum = 0;
   \   000270   90....       MOV     DPTR,#__Constant_0
   \   000273   78..         MOV     R0,#?V0 + 0
   \   000275   12....       LCALL   ?L_MOV_X
   \   000278   90....       MOV     DPTR,#txAccum
   \   00027B   78..         MOV     R0,#?V0 + 0
   \   00027D   12....       LCALL   ?L_MOV_TO_X
   \   000280   90....       MOV     DPTR,#__Constant_0
   \   000283   78..         MOV     R0,#?V0 + 0
   \   000285   12....       LCALL   ?L_MOV_X
   \   000288   90....       MOV     DPTR,#rxAccum
   \   00028B   78..         MOV     R0,#?V0 + 0
   \   00028D   12....       LCALL   ?L_MOV_TO_X
    978          }
   \   000290   7415         MOV     A,#0x15
   \   000292   12....       LCALL   ?DEALLOC_XSTACK8
   \   000295   7F10         MOV     R7,#0x10
   \   000297   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine12:
   \   000000   12....       LCALL   ??osal_GetSystemClock?relay
   \   000003   8A..         MOV     ?V0 + 0,R2
   \   000005   8B..         MOV     ?V0 + 1,R3
   \   000007   8C..         MOV     ?V0 + 2,R4
   \   000009   8D..         MOV     ?V0 + 3,R5
   \   00000B   90....       MOV     DPTR,#clkShdw
   \   00000E   78..         MOV     R0,#?V0 + 0
   \   000010   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine3:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   1A           DEC     R2
   \   000002   90....       MOV     DPTR,#__Constant_a
   \   000005   78..         MOV     R0,#?V0 + 0
   \   000007   22           RET

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??TransmitApp_Init?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    TransmitApp_Init

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??TransmitApp_ProcessEvent?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    TransmitApp_ProcessEvent

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??TransmitApp_ProcessZDOMsgs?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    TransmitApp_ProcessZDOMsgs

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??TransmitApp_HandleKeys?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    TransmitApp_HandleKeys

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??TransmitApp_MessageMSGCB?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    TransmitApp_MessageMSGCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??TransmitApp_SendTheMessage?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    TransmitApp_SendTheMessage

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??TransmitApp_ChangeState?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    TransmitApp_ChangeState

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??TransmitApp_SetSendEvt?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    TransmitApp_SetSendEvt

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??uart_sent?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    uart_sent

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??TransmitApp_DisplayResults?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    TransmitApp_DisplayResults

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "TransmitApp">`:
   \   000000   5472616E     DB "TransmitApp"
   \            736D6974
   \            41707000

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Home Automation --Sta...">`:
   \   000000   486F6D65     DB "Home Automation --Start!!\012"
   \            20417574
   \            6F6D6174
   \            696F6E20
   \            2D2D5374
   \            61727421
   \            210A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Bind Success!\\n">`:
   \   000000   42696E64     DB "Bind Success!\012"
   \            20537563
   \            63657373
   \            210A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Bind failure!\\n">`:
   \   000000   42696E64     DB "Bind failure!\012"
   \            20666169
   \            6C757265
   \            210A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Match_Desc_rsp Sucess!\\n">`:
   \   000000   4D617463     DB "Match_Desc_rsp Sucess!\012"
   \            685F4465
   \            73635F72
   \            73702053
   \            75636573
   \            73210A00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "<---">`:
   \   000000   3C2D2D2D     DB "<---"
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Binding~\\n">`:
   \   000000   42696E64     DB "Binding~\012"
   \            696E677E
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "sent light on cmd---\\n">`:
   \   000000   73656E74     DB "sent light on cmd---\012"
   \            206C6967
   \            6874206F
   \            6E20636D
   \            642D2D2D
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "sent light off cmd---\\n">`:
   \   000000   73656E74     DB "sent light off cmd---\012"
   \            206C6967
   \            6874206F
   \            66662063
   \            6D642D2D
   \            2D0A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "sent alarm on cmd---\\n">`:
   \   000000   73656E74     DB "sent alarm on cmd---\012"
   \            20616C61
   \            726D206F
   \            6E20636D
   \            642D2D2D
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "sent alrm off cmd---\\n">`:
   \   000000   73656E74     DB "sent alrm off cmd---\012"
   \            20616C72
   \            6D206F66
   \            6620636D
   \            642D2D2D
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Sucess !\\n">`:
   \   000000   53756365     DB "Sucess !\012"
   \            73732021
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "sent Error, so wait (...">`:
   \   000000   73656E74     DB "sent Error, so wait (10 mSec) and try again.\012"
   \            20457272
   \            6F722C20
   \            736F2077
   \            61697420
   \            28313020
   \            6D536563
   \            2920616E
   \            64207472
   \            79206167
   \            61696E2E
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_3e8:
   \   000000   E8030000     DD 1000

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_186a0:
   \   000000   A0860100     DD 100000

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_1869f:
   \   000000   9F860100     DD 99999

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_a:
   \   000000   0A000000     DD 10

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_0:
   \   000000   00000000     DD 0
    979          
    980          /*********************************************************************
    981          *********************************************************************/

   Maximum stack usage in bytes:

     Function                       ISTACK PSTACK XSTACK
     --------                       ------ ------ ------
     TransmitApp_ChangeState            2      0      0
       -> TransmitApp_SetSendEvt        4      0      0
     TransmitApp_DisplayResults         1      0     45
       -> osal_GetSystemClock           0      0     90
       -> osal_GetSystemClock           0      0     90
       -> osal_memset                   0      0     90
       -> HalLcdWriteString             0      0     90
       -> osal_memset                   0      0     90
       -> HalLcdWriteString             0      0     90
     TransmitApp_HandleKeys             1      0     41
       -> HalLedSet                     0      0     40
       -> uart_sent                     0      0     40
       -> uart_sent                     0      0     40
       -> HalLedSet                     0      0     40
       -> NLME_GetShortAddr             0      0     40
       -> ZDP_EndDeviceBindReq          0      0     58
       -> uart_sent                     0      0     40
       -> uart_sent                     0      0     40
       -> TransmitApp_SetSendEvt        0      0     40
       -> uart_sent                     0      0     40
       -> uart_sent                     0      0     40
       -> TransmitApp_SetSendEvt        0      0     40
     TransmitApp_Init                   1      0     11
       -> afRegister                    0      0     22
       -> RegisterForKeys               0      0     22
       -> HalLcdWriteString             0      0     22
       -> afDataReqMTU                  0      0     22
       -> ZDO_RegisterForZDOMsg         0      0     22
       -> ZDO_RegisterForZDOMsg         0      0     22
       -> HalLedSet                     0      0     22
       -> HalLedSet                     0      0     22
       -> HalLedSet                     0      0     22
       -> HalLedSet                     0      0     22
       -> uart_sent                     0      0     22
     TransmitApp_MessageMSGCB           1      0     24
       -> osal_mem_alloc                0      0     24
       -> uart_sent                     0      0     24
       -> osal_mem_free                 0      0     24
     TransmitApp_ProcessEvent           0      0     12
       -> osal_msg_receive              0      0     24
       -> TransmitApp_ProcessZDOMsgs
                                        0      0     24
       -> osal_msg_deallocate           0      0     24
       -> osal_msg_receive              0      0     24
       -> TransmitApp_HandleKeys        0      0     24
       -> HalLedSet                     0      0     24
       -> TransmitApp_MessageMSGCB      0      0     24
       -> TransmitApp_SendTheMessage
                                        0      0     24
       -> TransmitApp_SetSendEvt        0      0     24
     TransmitApp_ProcessZDOMsgs         0      0     22
       -> uart_sent                     0      0     20
       -> HalLedSet                     0      0     20
       -> uart_sent                     0      0     20
       -> HalLedSet                     0      0     20
       -> ZDO_ParseEPListRsp            0      0     20
       -> uart_sent                     0      0     20
       -> HalLedSet                     0      0     20
       -> osal_mem_free                 0      0     20
     TransmitApp_SendTheMessage         0      0     31
       -> AF_DataRequest                0      0     38
       -> uart_sent                     0      0     20
       -> uart_sent                     0      0     20
       -> osal_start_timerEx            0      0     20
     TransmitApp_SetSendEvt             2      0     20
       -> osal_set_event                4      0      0
     uart_sent                          0      0     30
       -> osal_strlen                   0      0     20
       -> HalUARTWrite                  0      0     20


   Segment part sizes:

     Function/Label                         Bytes
     --------------                         -----
     _A_P1                                     1
     P0DIR                                     1
     P1DIR                                     1
     TransmitApp_Msg                         102
     TransmitApp_ClusterList                   2
     TransmitApp_SimpleDesc                   12
     TransmitApp_epDesc                        6
     TransmitApp_TaskID                        1
     TransmitApp_NwkState                      1
     TransmitApp_TransID                       1
     TransmitApp_DstAddr                      12
     TransmitApp_State                         1
     clkShdw                                   4
     rxTotal                                   4
     txTotal                                   4
     rxAccum                                   4
     txAccum                                   4
     timesToSend                               1
     pktCounter                                2
     TransmitApp_MaxDataLength                 2
     light                                     1
     alarm                                     1
     TransmitApp_Init                        249
     TransmitApp_ProcessEvent                215
     ?Subroutine0                              5
     ?Subroutine9                             12
     TransmitApp_ProcessZDOMsgs              162
     ?Subroutine1                              5
     ??Subroutine16_0                          5
     ?Subroutine8                             16
     ?Subroutine5                             10
     TransmitApp_HandleKeys                  238
     ?Subroutine4                             19
     TransmitApp_MessageMSGCB                350
     ?Subroutine13                            11
     ?Subroutine15                             9
     ?Subroutine10                            12
     ?Subroutine7                             19
     ?Subroutine6                             16
     ?Subroutine14                            11
     TransmitApp_SendTheMessage              211
     TransmitApp_ChangeState                  25
     ?Subroutine2                              7
     TransmitApp_SetSendEvt                   18
     uart_sent                                36
     ?Subroutine11                             8
     TransmitApp_DisplayResults              666
     ?Subroutine12                            17
     ?Subroutine3                              8
     ??TransmitApp_Init?relay                  6
     ??TransmitApp_ProcessEvent?relay          6
     ??TransmitApp_ProcessZDOMsgs?relay        6
     ??TransmitApp_HandleKeys?relay            6
     ??TransmitApp_MessageMSGCB?relay          6
     ??TransmitApp_SendTheMessage?relay        6
     ??TransmitApp_ChangeState?relay           6
     ??TransmitApp_SetSendEvt?relay            6
     ??uart_sent?relay                         6
     ??TransmitApp_DisplayResults?relay        6
     ?<Constant "TransmitApp">                12
     ?<Constant "Home Automation --Sta...">   27
     ?<Constant "Bind Success!\n">            15
     ?<Constant "Bind failure!\n">            15
     ?<Constant "Match_Desc_rsp Sucess!\n">   24
     ?<Constant "<---">                        5
     ?<Constant "Binding~\n">                 10
     ?<Constant "sent light on cmd---\n">     22
     ?<Constant "sent light off cmd---\n">    23
     ?<Constant "sent alarm on cmd---\n">     22
     ?<Constant "sent alrm off cmd---\n">     22
     ?<Constant "Sucess !\n">                 10
     ?<Constant "sent Error, so wait (...">   46
     __Constant_3e8                            4
     __Constant_186a0                          4
     __Constant_1869f                          4
     __Constant_a                              4
     __Constant_0                              4

 
 2 360 bytes in segment BANKED_CODE
    60 bytes in segment BANK_RELAYS
     3 bytes in segment SFR_AN
   287 bytes in segment XDATA_ROM_C
   151 bytes in segment XDATA_Z
 
 2 420 bytes of CODE  memory
   267 bytes of CONST memory (+ 20 bytes shared)
     0 bytes of DATA  memory (+  3 bytes shared)
   151 bytes of XDATA memory

Errors: none
Warnings: 3
